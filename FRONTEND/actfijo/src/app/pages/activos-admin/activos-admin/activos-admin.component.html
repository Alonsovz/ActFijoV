<div style="color: #001529; font-size: 25px;" class="titulo">
    Administrador de Activos

    <button nz-button nzType="default" style="float: right;" (click)="showCardAgregar()">
        <i nz-icon nzType="folder-add"></i>Nueva alta de activo
    </button>

    <button *ngIf="user.rol != 'Usuario'" nz-button nzType="danger" style="float: right;"
     (click)="showCardListadoAdminActivos()">
        <i nz-icon nzType="bars"></i>Administrador de activos
    </button>


    <button *ngIf="user.rol == 'Administrador Act. VNR'" nz-button nzType="primary" style="float: right;
    margin-right: 25px !important;"
    (click)="showCardListadoAdminActivosVNR()">
       <i nz-icon nzType="bars"></i>Administrador de activos VNR
   </button>


     <nz-divider nzType="horizontal" style="height: 1px !important;background-color: #001529;"></nz-divider>
 </div>


 <form [formGroup]="frm_activoBaja" style="margin-left: 30px;margin-right: 30px;display: none;">       

    <table>
        <thead>
            <tr >
                <th>
                    Código
                </th>
                <th>
                    Activo
                </th>
            </tr>
        </thead>
        <tbody  formArrayName="actSeleccionadosBajas">
            <tr *ngFor="let item of actSeleccionadosBajas.controls; let pointIndex=index" [formGroupName]="pointIndex">
                <td>
                  <input nz-input type="text" formControlName="idActivo" readonly="true">
                </td>
               
                <td>
                    <input nz-input type="text" formControlName="descripcion" readonly="true">
                  </td>
               
                <button id="btnEliminarActBaja{{item.value.idActivo}}"
                (click)="eliminarActBaja(pointIndex)"><i nz-icon nzType="rest" nzTheme="outline"></i></button>

            </tr>
        </tbody>
    </table>
  </form>


  <form [formGroup]="frm_activoTraslado" style="margin-left: 30px;margin-right: 30px; display: none;">       

    <table>
        <thead>
            <tr >
                <th>
                    Código
                </th>
                <th>
                    Activo
                </th>

                
            </tr>
        </thead>
        <tbody  formArrayName="actSeleccionadosTraslados">
            <tr *ngFor="let item of actSeleccionadosTraslados.controls; let pointIndex=index" [formGroupName]="pointIndex">
                <td>
                  <input nz-input type="text" formControlName="idActivo" readonly="true">
                </td>
               
                <td>
                    <input nz-input type="text" formControlName="descripcion" readonly="true">
                  </td>
               
                <button id="btnEliminarActTraslado{{item.value.idActivo}}"
                (click)="eliminarActTraslado(pointIndex)"><i nz-icon nzType="rest" nzTheme="outline"></i></button>

            </tr>
        </tbody>
    </table>
  </form>



  <!--card para lista de activos administrador-->
<nz-card style="width:98%" class="cardShadow" *ngIf="mostrarCardListadoAdmin">

    <div nz-row>
        <div nz-col [nzSpan]="12">
        </div>

        <div  nz-col [nzSpan]="6">
            <button *ngIf="btnFinalizarBajasAdmin" (click)="finalizarListadoBajas()" nz-button nzType="default" 
            style="float: right !important; margin-right: 10px !important; background-color: #AA0260 !important;
            color:white; margin-top: 5px;">Finalizar selección de bajas</button>


        <button *ngIf="btnFinalizarTrasladosAdmin" (click)="finalizarListadoTraslados()" nz-button nzType="default" 
            style="float: right !important; margin-right: 10px !important; background-color: #029BAA !important;
            color:white; margin-top: 5px;">Finalizar selección de traslados</button>
        </div>
        <div nz-col nzSpan="6">
            <nz-form-label>Buscar </nz-form-label>
            <input nz-input [(ngModel)]="_texto" id="texto" name="texto" placeholder="Buscar" (ngModelChange)="ConvertToLower($event)">
        </div>
    </div>

<nz-tabset nzTabPosition="left">
    
    
        <nz-tab [nzTitle]="tituloTabAltas" (nzClick)="getAltasAdmin()">

            <ng-template #tituloTabAltas>
                Altas <nz-badge  [nzCount]="conteoAltas"  nzShowZero
                [nzStyle]="{ backgroundColor: '#007E61', color: 'white' }"></nz-badge>
            </ng-template>

           

        <h2 style="color: #007E61 !important;"> <i nz-icon nzType="bars" nzTheme="outline"></i> Altas de activos</h2>

        <nz-skeleton [nzActive]="true"  *ngIf="mostrarSkeletonTablaAdmin"></nz-skeleton>

            <nz-table nzShowPagination #altasAdmin
            nzShowSizeChanger #basicTable (nzCurrentPageDataChange)="paginacionTablaAltasAdmin($event)"
            [nzData]="listaAltasAdminObj" *ngIf="mostrarTablaCargaAdmin">
                <thead>
                <tr>
    
                    <th style="background-color: #007E61 !important;"><i nz-icon nzType="barcode" nzTheme="outline"></i> Código</th>
                    <th style="background-color: #007E61 !important;"><i nz-icon nzType="edit" nzTheme="outline"></i> Descripción</th>
                    <th style="background-color: #007E61 !important;"><i nz-icon nzType="calendar" nzTheme="outline"></i> Fecha de alta</th>
                    <th style="background-color: #007E61 !important;"><i nz-icon nzType="dollar" nzTheme="outline"></i> Valor de compra </th>
                    <th style="background-color: #007E61 !important;"><i nz-icon nzType="user" nzTheme="outline"></i> Asignado a </th>
                    <th style="background-color: #007E61 !important;text-align: center;"><i nz-icon nzType="bars" nzTheme="outline"></i> Acciones</th>
                </tr>
                </thead>
                <tbody>
                        <tr *ngFor="let ob of altasAdmin.data | searchactgestion: texto">
                        <td>{{ ob.af_codigo_interno }}</td>
                        <td style="width: 20% !important;">{{ ob.descripcion_bien }}</td>
                        <td>{{ ob.fechaAlta }} {{ ob.horaAlta }}</td>
                        <td>{{ ob.compraSiva }}</td>
                        <td>{{ ob.asignado }}</td>
                        <td  style="text-align: center; align-items: left;">
                                 <button style="margin: 5px !important;" nz-button nzType="default" nzDanger (click)="editarActFijo(ob,1)"
                            nzTooltipTitle="Detalles del activo" nzTooltipPlacement="topCenter" nz-tooltip><i nz-icon nzType="edit" nzTheme="outline"></i></button>
        
                            <input type="checkbox"  value="ob.af_codigo_interno" nzTooltipTitle="Seleccionar para baja" 
                        nzTooltipPlacement="topCenter" nz-tooltip 
                        style="height: 20px !important; width: 20px !important; margin: auto; margin-right: 10px;"
                        (change)="seleccionarActBaja($event.target.checked, ob)">
                           
                        <input type="checkbox" value="ob.af_codigo_interno" 
                        nzTooltipTitle="Seleecionar para traslado" nzTooltipPlacement="topCenter" nz-tooltip
                        style="height: 20px !important; width: 20px !important; margin: auto;"
                        (change)="seleccionarActTraslado($event.target.checked, ob)">
                        </td>
                        </tr>
                
                
                </tbody>
            </nz-table>
        </nz-tab>
    
    <nz-tab [nzTitle]="tituloTabTraslados" (nzClick)="getTrasladosAdmin()">

        <ng-template #tituloTabTraslados>
            Traslados <nz-badge [nzCount]="conteoTraslados" nzShowZero
            [nzStyle]="{ backgroundColor: '#1A3A78' }"></nz-badge>
          </ng-template>

        <div nz-row>
            <h2 style="color: #1A3A78 !important;"> <i nz-icon nzType="bars" nzTheme="outline"></i> Traslados de activos</h2>

            <nz-skeleton [nzActive]="true"  *ngIf="mostrarSkeletonTablaAdmin"></nz-skeleton>

            <nz-table nzShowPagination #trasladosAdmin
            nzShowSizeChanger #basicTable (nzCurrentPageDataChange)="paginacionTablaTrasladoAdmin($event)"
            [nzData]="listaTrasladosAdminObj" *ngIf="mostrarTablaCargaAdmin">
                <thead>
                    <tr>
    
                    <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="barcode" nzTheme="outline"></i> Código</th>
                    <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="edit" nzTheme="outline"></i> Descripción</th>
                    <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="calendar" nzTheme="outline"></i> Fecha de traslado</th>
                    <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="user" nzTheme="outline"></i> Usuario anterior </th>
                    <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="user" nzTheme="outline"></i> Asignado a </th>
                    <th style="background-color: #1A3A78 !important;text-align: center;"><i nz-icon nzType="bars" nzTheme="outline"></i> Acciones</th>
                    </tr>
                </thead>
                <tbody>
                        <tr *ngFor="let ob of trasladosAdmin.data | searchactgestion: texto">
                            <td>{{ ob.af_codigo_interno }}</td>
                            <td style="width: 20% !important;">{{ ob.descripcion_bien }}</td>
                            <td>{{ ob.fechaTraslado }} {{ ob.horaTraslado }}</td>
                            <td>{{ ob.usuarioAnterior }}</td>
                            <td>{{ ob.asignado }}</td>
                            <td  style="text-align: center; align-items: left;">
                          
                                <button style="margin: 5px !important;" nz-button nzType="default" nzDanger (click)="editarActFijo(ob,1)"
                                nzTooltipTitle="Detalles del activo" nzTooltipPlacement="topCenter" nz-tooltip><i nz-icon nzType="edit" nzTheme="outline"></i></button>
            
                                <input type="checkbox"  value="ob.af_codigo_interno" nzTooltipTitle="Seleecionar para baja" 
                                nzTooltipPlacement="topCenter" nz-tooltip 
                                style="height: 20px !important; width: 20px !important; margin: auto; margin-right: 10px;"
                                (change)="seleccionarActBaja($event.target.checked, ob)">
                                
                                <input type="checkbox" value="ob.af_codigo_interno" 
                                nzTooltipTitle="Seleecionar para traslado" nzTooltipPlacement="topCenter" nz-tooltip
                                style="height: 20px !important; width: 20px !important; margin: auto;"
                                (change)="seleccionarActTraslado($event.target.checked, ob)">
                              </td>
                        </tr>
                    
                    
                </tbody>
            </nz-table>
        </div>
      
    </nz-tab>


    <nz-tab [nzTitle]="tituloTabBajas" (nzClick)="getBajasAdmin()">

        <ng-template #tituloTabBajas>
            Bajas <nz-badge [nzCount]="conteoBajas" nzShowZero
            [nzStyle]="{ backgroundColor: '#7B0505' }"></nz-badge>
          </ng-template>

        <div nz-row>
            <h2 style="color: #7B0505 !important;"> <i nz-icon nzType="bars" nzTheme="outline"></i> Bajas de activos</h2>

            <nz-skeleton [nzActive]="true"  *ngIf="mostrarSkeletonTablaAdmin"></nz-skeleton>

            <nz-table nzShowPagination #bajasAdmin
            nzShowSizeChanger #basicTable (nzCurrentPageDataChange)="paginacionTablaBajasAdmin($event)"
            [nzData]="listaBajasAdminObj" *ngIf="mostrarTablaCargaAdmin">
                <thead>
                <tr>
    
                    <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="barcode" nzTheme="outline"></i> Código</th>
                    <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="edit" nzTheme="outline"></i> Descripción</th>
                    <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="calendar" nzTheme="outline"></i> Fecha de baja</th>
                    <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="dollar" nzTheme="outline"></i> Valor de compra </th>
                    <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="user" nzTheme="outline"></i> Asignado a </th>
                    <th style="background-color: #7B0505 !important;;text-align: center;"><i nz-icon nzType="bars" nzTheme="outline"></i> Acciones</th>
                </tr>
                </thead>
                <tbody>
                        <tr *ngFor="let ob of bajasAdmin.data | searchactgestion: texto">
                        <td>{{ ob.af_codigo_interno }}</td>
                        <td style="width: 20% !important;">{{ ob.descripcion_bien }}</td>
                        <td>{{ ob.fechaBaja }} {{ ob.horaBaja }}</td>
                        <td>{{ ob.compraSiva }}</td>
                        <td>{{ ob.asignado }}</td>
                        <td  style="text-align: center; align-items: left;">
                       
                            <button style="margin: 5px !important;" nz-button nzType="default" nzDanger (click)="editarActFijo(ob,1)"
                            nzTooltipTitle="Detalles del activo" nzTooltipPlacement="topCenter" nz-tooltip><i nz-icon nzType="edit" nzTheme="outline"></i></button>
        
                       
                        </td>
                        </tr>
                
                
                </tbody>
            </nz-table>
        </div>

         
    </nz-tab>


    <nz-tab [nzTitle]="tituloTabAltasPen" (nzClick)="getAltasPendientesAdmin()">

        
        <ng-template #tituloTabAltasPen>
            Altas pendientes de aceptación  <nz-badge [nzCount]="conteoAltasPen" nzShowZero
            [nzStyle]="{ backgroundColor: '#9E4211' }"></nz-badge>
          </ng-template>

        <div nz-row>
            <h2 style="color: #9E4211 !important;"> <i nz-icon nzType="bars" nzTheme="outline"></i>
                Altas pendientes de aprobación</h2>

            <nz-skeleton [nzActive]="true"  *ngIf="mostrarSkeletonTablaAdmin"></nz-skeleton>

            <nz-table nzShowPagination #altasPendientesAdmin
        nzShowSizeChanger #basicTable (nzCurrentPageDataChange)="paginacionTablaAltasPendientesAdmin($event)"
        [nzData]="listaAltasPendienteAdminObj" *ngIf="mostrarTablaCargaAdmin">
            <thead>
              <tr>

                <th style="background-color: #9E4211 !important;;"><i nz-icon nzType="barcode" nzTheme="outline"></i> Código</th>
                <th style="background-color: #9E4211 !important;;"><i nz-icon nzType="edit" nzTheme="outline"></i> Descripción</th>
                <th style="background-color: #9E4211 !important;;"><i nz-icon nzType="calendar" nzTheme="outline"></i> Fecha de compra</th>
                <th style="background-color: #9E4211 !important;;"><i nz-icon nzType="dollar" nzTheme="outline"></i> Valor de compra </th>
                <th style="background-color: #9E4211 !important;;"><i nz-icon nzType="user" nzTheme="outline"></i> Asignado a </th>
                <th style="background-color: #9E4211 !important;;text-align: center;"><i nz-icon nzType="bars" nzTheme="outline"></i> Acciones</th>
              </tr>
            </thead>
            <tbody>
                    <tr *ngFor="let ob of altasPendientesAdmin.data | searchactgestion: texto">
                      <td>{{ ob.af_codigo_interno }}</td>
                      <td style="width: 20% !important;">{{ ob.descripcion_bien }}</td>
                      <td>{{ ob.fechaCompraT }}</td>
                      <td>{{ ob.compraSiva }}</td>
                      <td>{{ ob.asignado }}</td>
                      <td  style="text-align: center; align-items: left;">
                          <button style="margin: 5px !important;" nz-button nzType="primary"
                          *ngIf="ob.estadoActivo=='Pendiente' && user.rol != 'Usuario' && ob.estadoAc=='A'"
                          nzTooltipTitle="Aceptar alta" nzTooltipPlacement="topCenter" nz-tooltip (click)="confimarActivacion(ob)"><i nz-icon nzType="check" nzTheme="outline"></i></button>
      
                          <button style="margin: 5px !important;" nz-button nzType="default" nzDanger (click)="editarActFijo(ob,1)"
                          nzTooltipTitle="Detalles del activo" nzTooltipPlacement="topCenter" nz-tooltip><i nz-icon nzType="edit" nzTheme="outline"></i></button>
      
                         
                          <button style="margin: 5px !important;" nz-button nzType="primary"  *ngIf="ob.estadoActivo=='Pendiente' && user.rol != 'Usuario' && ob.estadoAc=='B'"
                          (click)="mostrarModalFinalizarProcesoBaja(ob)"
                          nzTooltipTitle="Dar de baja" 
                          nzTooltipPlacement="topCenter" nz-tooltip> <i nz-icon nzType="check" nzTheme="outline"></i></button>
      
                    
                      </td>
                    </tr>
               
              
            </tbody>
        </nz-table>
        </div>

        
    </nz-tab>

    <nz-tab [nzTitle]="tituloTabTrasladosPen" (nzClick)="getTrasladosPendientesAdmin()">
        <ng-template #tituloTabTrasladosPen>
            Traslados pendientes de aceptación  <nz-badge [nzCount]="conteoTrasladosPen" nzShowZero
            [nzStyle]="{ backgroundColor: '#10690A' }"></nz-badge>
          </ng-template>


        <div nz-row>
            <h2 style="color: #10690A !important;"> <i nz-icon nzType="bars" nzTheme="outline"></i>
                Traslados pendientes de aprobación</h2>

            <nz-skeleton [nzActive]="true"  *ngIf="mostrarSkeletonTablaAdmin"></nz-skeleton>
            
        </div>
        <nz-table nzShowPagination #trasladosPendientesAdmin
        nzShowSizeChanger #basicTable (nzCurrentPageDataChange)="paginacionTablaTrasladoPendienteAdmin($event)"
        [nzData]="listaTrasladosPendienteAdminObj" *ngIf="mostrarTablaCargaAdmin">
            <thead>
              <tr>

                <th style="background-color: #10690A !important;"><i nz-icon nzType="barcode" nzTheme="outline"></i> Código</th>
                <th style="background-color: #10690A !important;"><i nz-icon nzType="edit" nzTheme="outline"></i> Descripción</th>
                <th style="background-color: #10690A !important;"><i nz-icon nzType="user" nzTheme="outline"></i> Recibiendo de </th>
                <th style="background-color: #10690A !important;"><i nz-icon nzType="user" nzTheme="outline"></i> Asignado a </th>
                <th style="background-color: #10690A !important;text-align: center;"><i nz-icon nzType="bars" nzTheme="outline"></i> Acciones</th>
              </tr>
            </thead>
            <tbody>
                    <tr  *ngFor="let ob of trasladosPendientesAdmin.data | searchactgestion: texto">
                      <td>{{ ob.af_codigo_interno }}</td>
                      <td style="width: 20% !important;">{{ ob.descripcion_bien }}</td>
                      <td>{{ ob.usuarioAnterior }}</td>
                      <td>{{ ob.asignado }}</td>
                      <td  style="text-align: center; align-items: left;">
                
      
                          <button style="margin: 5px !important;" nz-button nzType="default" nzDanger (click)="editarActFijo(ob,1)"
                          nzTooltipTitle="Detalles del activo" nzTooltipPlacement="topCenter" nz-tooltip><i nz-icon nzType="edit" nzTheme="outline"></i></button>
      
                        <button style="margin: 5px !important;" nz-button nzType="primary"  *ngIf="ob.estadoActivo=='Pendiente' && user.rol != 'Usuario' && ob.estadoAc=='B'"
                          (click)="mostrarModalFinalizarProcesoBaja(ob)"
                          nzTooltipTitle="Dar de baja" 
                          nzTooltipPlacement="topCenter" nz-tooltip> <i nz-icon nzType="check" nzTheme="outline"></i></button>
      
                      </td>
                    </tr>
               
              
            </tbody>
          </nz-table>
    </nz-tab>

    <nz-tab [nzTitle]="tituloTabBajasPen" (nzClick)="getBajasPendientesAdmin()">

        
        <ng-template #tituloTabBajasPen>
            Bajas pendientes de aceptación  <nz-badge [nzCount]="conteoBajasPen" nzShowZero
            [nzStyle]="{ backgroundColor: '#39136D' }"></nz-badge>
          </ng-template>


        <div nz-row>
            <h2 style="color: #39136D !important;"> <i nz-icon nzType="bars" nzTheme="outline"></i>
                Bajas pendientes de aprobación</h2>

            <nz-skeleton [nzActive]="true"  *ngIf="mostrarSkeletonTablaAdmin"></nz-skeleton>
            
        </div>
        <nz-table nzShowPagination #bajasPendientesAdmin
        nzShowSizeChanger #basicTable (nzCurrentPageDataChange)="paginacionTablaBajasPendienteAdmin($event)"
        [nzData]="listaBajasPendienteAdminObj" *ngIf="mostrarTablaCargaAdmin">
            <thead>
              <tr>

                <th style="background-color: #39136D !important;"><i nz-icon nzType="barcode" nzTheme="outline"></i> Código</th>
                <th style="background-color: #39136D !important;"><i nz-icon nzType="edit" nzTheme="outline"></i> Descripción</th>
                <th style="background-color: #39136D !important;"><i nz-icon nzType="calendar" nzTheme="outline"></i> Fecha de compra</th>
                <th style="background-color: #39136D !important;"><i nz-icon nzType="dollar" nzTheme="outline"></i> Motivo </th>
                <th style="background-color: #39136D !important;"><i nz-icon nzType="user" nzTheme="outline"></i> Asignado a </th>
                <th style="background-color: #39136D !important;text-align: center;"><i nz-icon nzType="bars" nzTheme="outline"></i> Acciones</th>
              </tr>
            </thead>
            <tbody>
                    <tr  *ngFor="let ob of bajasPendientesAdmin.data | searchactgestion: texto">
                      <td>{{ ob.af_codigo_interno }}</td>
                      <td style="width: 20% !important;">{{ ob.descripcion_bien }}</td>
                      <td>{{ ob.fechaCompraT }}</td>
                      <td>{{ ob.motivoBaja }}</td>
                      <td>{{ ob.asignado }}</td>
                      <td  style="text-align: center; align-items: left;">
                    
                          <button style="margin: 5px !important;" nz-button nzType="default" nzDanger (click)="editarActFijo(ob,1)"
                          nzTooltipTitle="Detalles del activo" nzTooltipPlacement="topCenter" nz-tooltip><i nz-icon nzType="edit" nzTheme="outline"></i></button>
                            
                          <button style="margin: 5px !important;" nz-button nzType="primary"  *ngIf="ob.estadoActivo=='Pendiente' && user.rol != 'Usuario' && ob.estadoAc=='B'"
                          (click)="mostrarModalFinalizarProcesoBaja(ob)"
                          nzTooltipTitle="Finalizar proceso de baja" 
                          nzTooltipPlacement="topCenter" nz-tooltip> <i nz-icon nzType="check" nzTheme="outline"></i></button>
      
                 
                      </td>
                    </tr>
               
              
            </tbody>
          </nz-table>
    </nz-tab>

</nz-tabset>

</nz-card>


  <!--card para lista de activos administrador VNR-->
  <nz-card style="width:98%" class="cardShadow" *ngIf="mostrarCardListadoAdminVNR">

    <div nz-row>
        <div nz-col [nzSpan]="12">
        </div>

        <div  nz-col [nzSpan]="6">
        </div>
        <div nz-col nzSpan="6">
            <nz-form-label>Buscar </nz-form-label>
            <input nz-input [(ngModel)]="_texto" id="texto" name="texto" placeholder="Buscar" (ngModelChange)="ConvertToLower($event)">
        </div>
    </div>

<nz-tabset nzTabPosition="left">
    
    
        <nz-tab [nzTitle]="tituloTabAltasVNR" (nzClick)="getAltasAdminVNR()">

            <ng-template #tituloTabAltasVNR>
                Altas <nz-badge  [nzCount]="conteoAltasVNR"  nzShowZero
                [nzStyle]="{ backgroundColor: '#007E61', color: 'white' }"></nz-badge>
            </ng-template>

           

        <h2 style="color: #007E61 !important;"> <i nz-icon nzType="bars" nzTheme="outline"></i> Altas de activos VNR</h2>

        <nz-skeleton [nzActive]="true"  *ngIf="mostrarSkeletonTablaAdminVNR"></nz-skeleton>

            <nz-table nzShowPagination #altasAdminVNR
            nzShowSizeChanger #basicTable (nzCurrentPageDataChange)="paginacionTablaAltasAdmin($event)"
            [nzData]="listaAltasAdminObjVNR" *ngIf="mostrarTablaCargaAdminVNR">
                <thead>
                <tr>
    
                    <th style="background-color: #007E61 !important;"><i nz-icon nzType="barcode" nzTheme="outline"></i> Código</th>
                    <th style="background-color: #007E61 !important;"><i nz-icon nzType="edit" nzTheme="outline"></i> Descripción</th>
                    <th style="background-color: #007E61 !important;"><i nz-icon nzType="calendar" nzTheme="outline"></i> Fecha de alta</th>
                    <th style="background-color: #007E61 !important;"><i nz-icon nzType="dollar" nzTheme="outline"></i> Valor de compra </th>
                    <th style="background-color: #007E61 !important;"><i nz-icon nzType="user" nzTheme="outline"></i> Asignado a </th>
                    <th style="background-color: #007E61 !important;text-align: center;"><i nz-icon nzType="bars" nzTheme="outline"></i> Acciones</th>
                </tr>
                </thead>
                <tbody>
                        <tr *ngFor="let ob of altasAdminVNR.data | searchactgestion: texto">
                        <td>{{ ob.af_codigo_interno }}</td>
                        <td style="width: 20% !important;">{{ ob.descripcion_bien }}</td>
                        <td>{{ ob.fechaAlta }} {{ ob.horaAlta }}</td>
                        <td>{{ ob.valorVNR }}</td>
                        <td>{{ ob.asignado }}</td>
                        <td  style="text-align: center; align-items: left;">
                                 <button style="margin: 5px !important;" nz-button nzType="default" nzDanger (click)="editarActFijo(ob,1)"
                            nzTooltipTitle="Detalles del activo" nzTooltipPlacement="topCenter" nz-tooltip><i nz-icon nzType="edit" nzTheme="outline"></i></button>
                        </td>
                        </tr>
                
                
                </tbody>
            </nz-table>
      
        </nz-tab>
  

        <nz-tab [nzTitle]="tituloTabTrasladosVNR" (nzClick)="getTrasladosAdminVNR()">

            <ng-template #tituloTabTrasladosVNR>
                Traslados <nz-badge [nzCount]="conteoTrasladosVNR" nzShowZero
                [nzStyle]="{ backgroundColor: '#1A3A78' }"></nz-badge>
              </ng-template>
    
            <div nz-row>
                <h2 style="color: #1A3A78 !important;"> <i nz-icon nzType="bars" nzTheme="outline"></i>
                     Traslados de activos VNR</h2>
    
                <nz-skeleton [nzActive]="true"  *ngIf="mostrarSkeletonTablaAdminVNR"></nz-skeleton>
    
                <nz-table nzShowPagination #trasladosAdminVNR
                nzShowSizeChanger #basicTable (nzCurrentPageDataChange)="paginacionTablaTrasladoAdmin($event)"
                [nzData]="listaTrasladosAdminObjVNR" *ngIf="mostrarTablaCargaAdminVNR">
                    <thead>
                        <tr>
        
                        <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="barcode" nzTheme="outline"></i> Código</th>
                        <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="edit" nzTheme="outline"></i> Descripción</th>
                        <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="calendar" nzTheme="outline"></i> Fecha de traslado</th>
                        <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="user" nzTheme="outline"></i> Usuario anterior </th>
                        <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="user" nzTheme="outline"></i> Asignado a </th>
                        <th style="background-color: #1A3A78 !important;text-align: center;"><i nz-icon nzType="bars" nzTheme="outline"></i> Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                            <tr *ngFor="let ob of trasladosAdminVNR.data | searchactgestion: texto">
                                <td>{{ ob.af_codigo_interno }}</td>
                                <td style="width: 20% !important;">{{ ob.descripcion_bien }}</td>
                                <td>{{ ob.fechaTraslado }} {{ ob.horaTraslado }}</td>
                                <td>{{ ob.usuarioAnterior }}</td>
                                <td>{{ ob.asignado }}</td>
                                <td  style="text-align: center; align-items: left;">
                              
                                    <button style="margin: 5px !important;" nz-button nzType="default" nzDanger (click)="editarActFijo(ob,1)"
                                    nzTooltipTitle="Detalles del activo" nzTooltipPlacement="topCenter" nz-tooltip><i nz-icon nzType="edit" nzTheme="outline"></i></button>
                
                                    <input type="checkbox"  value="ob.af_codigo_interno" nzTooltipTitle="Seleecionar para baja" 
                                    nzTooltipPlacement="topCenter" nz-tooltip 
                                    style="height: 20px !important; width: 20px !important; margin: auto; margin-right: 10px;"
                                    (change)="seleccionarActBaja($event.target.checked, ob)">
                                    
                                    <input type="checkbox" value="ob.af_codigo_interno" 
                                    nzTooltipTitle="Seleecionar para traslado" nzTooltipPlacement="topCenter" nz-tooltip
                                    style="height: 20px !important; width: 20px !important; margin: auto;"
                                    (change)="seleccionarActTraslado($event.target.checked, ob)">
                                  </td>
                            </tr>
                        
                        
                    </tbody>
                </nz-table>
            </div>
          
        </nz-tab>
    
    
        <nz-tab [nzTitle]="tituloTabBajasVNR" (nzClick)="getBajasAdminVNR()">
    
            <ng-template #tituloTabBajasVNR>
                Bajas <nz-badge [nzCount]="conteoBajasVNR" nzShowZero
                [nzStyle]="{ backgroundColor: '#7B0505' }"></nz-badge>
              </ng-template>
    
            <div nz-row>
                <h2 style="color: #7B0505 !important;"> <i nz-icon nzType="bars" nzTheme="outline"></i> 
                    Bajas de activos VNR</h2>
    
                <nz-skeleton [nzActive]="true"  *ngIf="mostrarSkeletonTablaAdminVNR"></nz-skeleton>
    
                <nz-table nzShowPagination #bajasAdminVNR
                nzShowSizeChanger #basicTable (nzCurrentPageDataChange)="paginacionTablaBajasAdmin($event)"
                [nzData]="listaBajasAdminObjVNR" *ngIf="mostrarTablaCargaAdminVNR">
                    <thead>
                    <tr>
        
                        <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="barcode" nzTheme="outline"></i> Código</th>
                        <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="edit" nzTheme="outline"></i> Descripción</th>
                        <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="calendar" nzTheme="outline"></i> Fecha de baja</th>
                        <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="dollar" nzTheme="outline"></i> Valor de compra </th>
                        <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="user" nzTheme="outline"></i> Asignado a </th>
                        <th style="background-color: #7B0505 !important;;text-align: center;"><i nz-icon nzType="bars" nzTheme="outline"></i> Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                            <tr *ngFor="let ob of bajasAdminVNR.data | searchactgestion: texto">
                            <td>{{ ob.af_codigo_interno }}</td>
                            <td style="width: 20% !important;">{{ ob.descripcion_bien }}</td>
                            <td>{{ ob.fechaBaja }} {{ ob.horaBaja }}</td>
                            <td>{{ ob.valorVNR }}</td>
                            <td>{{ ob.asignado }}</td>
                            <td  style="text-align: center; align-items: left;">
                           
                                <button style="margin: 5px !important;" nz-button nzType="default" nzDanger (click)="editarActFijo(ob,1)"
                                nzTooltipTitle="Detalles del activo" nzTooltipPlacement="topCenter" nz-tooltip><i nz-icon nzType="edit" nzTheme="outline"></i></button>
            
                           
                            </td>
                            </tr>
                    
                    
                    </tbody>
                </nz-table>
            </div>
    
             
        </nz-tab>

</nz-tabset>

</nz-card>

<!--Card para mostrar formulario de alta de activo-->
<nz-card style="width:95%" class="cardShadow" *ngIf="mostrarCardAgregar">
    <nz-skeleton [nzActive]="true"  *ngIf="mostrarSkeleton"></nz-skeleton>
    <form nz-form  [formGroup]="altaActivoForm">
    <div nz-row *ngIf="datosCargados">

        <h2><i nz-icon nzType="file-add" nzTheme="fill"></i> Nuevo Activo</h2>

        <nz-divider nzType="horizontal" style="height: 1px !important;background-color: #001529;"></nz-divider>

        <div nz-col nzSpan="24">
            <div nz-row>
                <div nz-col [nzSpan]="5">
                    <nz-form-label nzRequired>Tipo de documento</nz-form-label>
                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Tipo de documento" formControlName="tipoDocumento">
                        <nz-option *ngFor="let tp of objTipoDocumentosTbl" nzValue="{{tp.codigo_tipo_documento}}" nzLabel="{{tp.descripcion_tipo_documento}}"></nz-option>
                    </nz-select>
                </div>
                <div nz-col [nzSpan]="1"></div>
                <div nz-col [nzSpan]="5">
                    <nz-form-label nzRequired>N° de documento</nz-form-label>
                    <input type="text" nz-input placeholder="N° de documento" formControlName="numeroDocumento">

                    <input type="hidden"  formControlName="asignadoA" [(ngModel)]="user.id" readonly>
                </div>
                <div nz-col [nzSpan]="1"></div>
                <div nz-col [nzSpan]="5">
                    <nz-form-label nzRequired>Usuario responsable</nz-form-label>
                    <nz-select formControlName="codigo_asignado"  
                    nzShowSearch nzAllowClear nzPlaceHolder="Nombre de usuario">
                        <nz-option *ngFor="let user of objUsuarios" nzValue="{{user.id}}" nzLabel="{{user.nombre}}"></nz-option>
                      </nz-select>
                </div>

                <div nz-col [nzSpan]="1"></div>
                <div nz-col [nzSpan]="6">
                    <nz-form-label nzRequired>Tipo de Activo</nz-form-label>
                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Tipo de activo" formControlName="codigo_ppye"
                    (ngModelChange)="getCuentaContablePPYE()">
                        <nz-option nzValue="0" nzLabel="Selecciona una opción"></nz-option>
                        <nz-option *ngFor="let tp of objTipoActivosTbl" nzValue="{{tp.cod_ppye}}" nzLabel="{{tp.descripcion_ppye}}"></nz-option>
                    </nz-select>
                </div>
              

            </div>
        </div>


        <div nz-col nzSpan="24" style="margin-top: 20px !important;">
            <div nz-row>
              
            </div>
        </div>
        <div>
            <div nz-col nzSpan="24"  *ngFor="let tp of (objTipoActivoPPYE || [])" >
                <nz-divider nzType="horizontal" style="height: 1px !important;background-color: #001529;"></nz-divider>
    
                <h3>Detalles del tipo de activo</h3>
                <div nz-row>
                    <div nz-col [nzSpan]="1"></div>
                    <div nz-col [nzSpan]="5">
                        <nz-form-label nzRequired>Cuenta contable asociada</nz-form-label>
                        <input type="text" placeholder="Cuenta contable asociada" nz-input
                        [(ngModel)]="tp.cuenta_contable" formControlName="cuentaContable">
                    </div>
                    <div nz-col [nzSpan]="1"></div>
                    <div nz-col [nzSpan]="5">
                        <nz-form-label nzRequired>Tasa Fiscal</nz-form-label>
                        <input type="text" placeholder="Tasa Fiscal" nz-input
                        [(ngModel)]="tp.tasaFiscal" formControlName="tasaFiscal" >
                    </div>
                    <div nz-col [nzSpan]="1"></div>
                    <div nz-col [nzSpan]="5">
                        <nz-form-label nzRequired>Tasa Financiera</nz-form-label>
                        <input type="text" placeholder="Tasa Financiera" nz-input
                        [(ngModel)]="tp.tasaFinan" formControlName="tasaFinanciera">
                    </div>
    
                    <div nz-col [nzSpan]="1"></div>
                    <div nz-col [nzSpan]="4">
                        <nz-form-label nzRequired>Vida útil (Años)</nz-form-label>
                        <input type="text" placeholder="Vida útil (Años)" nz-input
                        [(ngModel)]="tp.vidaUtil" formControlName="vidaUtil">
                    </div>
                </div>

                <div nz-row>
                    <div nz-col [nzSpan]="1"></div>
                    <div nz-col [nzSpan]="5">
                        <nz-form-label nzRequired>Tipo de bien</nz-form-label>
                        <input type="text" placeholder="Vida útil (Años)" nz-input
                        [(ngModel)]="tp.tipo_bien" formControlName="tipo_bien">
                    </div>
                    <div nz-col [nzSpan]="1"></div>
                    <div nz-col [nzSpan]="5">
                        <nz-form-label nzRequired>Siglas</nz-form-label>
                        <input type="text" nz-input [(ngModel)]="tp.siglas" formControlName="siglas">
                    </div>

                    <div nz-col [nzSpan]="1"></div>
                    <div nz-col [nzSpan]="7">

                        <nz-form-label nzRequired>Seleccione el municipio de la cuenta contable</nz-form-label>
                        <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Municipio de la cuenta contable" formControlName="cuentaHija">
                            <nz-option *ngFor="let tp of objCuentasHijas" nzValue="{{tp.cuenta}}" nzLabel="{{tp.cuenta}} -- {{tp.nombre}}"></nz-option>
                        </nz-select>
                    </div>
                </div>
                <nz-divider nzType="horizontal" style="height: 1px !important;background-color: #001529;"></nz-divider>
    
            </div>
        </div>
     

        <div nz-col nzSpan="24">
            <div nz-row style="margin-top: 20px !important;">
                
                <div nz-col [nzSpan]="5">
                    <nz-form-label nzRequired>Fecha de registro</nz-form-label>
                        <input type="date" nz-input formControlName="fechaRegistro">
                </div>
                <div nz-col [nzSpan]="1"></div>
                <div nz-col [nzSpan]="6">
                    <nz-form-label nzRequired>Tipo de partida</nz-form-label>
                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Tipo de partida" formControlName="tipoPartida">
                        <nz-option *ngFor="let tp of objTipoPartida" nzValue="{{tp.tipo_partida_id}}" nzLabel="{{tp.tipo_partida_descripcion}}"></nz-option>
                    </nz-select>
                </div>
              
                <div nz-col [nzSpan]="1"></div>
                <div nz-col [nzSpan]="5">
                    <nz-form-label nzRequired>VNR - Tipo de activo fijo</nz-form-label>
                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="VNR - Tipo de activo fijo" formControlName="tipoActivoVNR">
                        <nz-option *ngFor="let tp of objTipoBienVNR" nzValue="{{tp.codigo_tipo_bien_vnr}}" nzLabel="{{tp.nombre_tipo_bien}}"></nz-option>
                    </nz-select>
                </div>
                <div nz-col [nzSpan]="1"></div>
                <div nz-col [nzSpan]="5">
                    <nz-form-label nzRequired>Descripción del bien</nz-form-label>
                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Descripción del bien" formControlName="descripcionBien">
                        <nz-option nzValue="0" nzLabel="Selecciona una opción"></nz-option>
                        <nz-option *ngFor="let tp of descActivos" nzValue="{{tp.nombre}}" nzLabel="{{tp.nombre}}"></nz-option>
                    </nz-select>
                </div>
            </div>
        </div>

        <div nz-col nzSpan="24">
            <div nz-row style="margin-top: 20px !important;">
                <div nz-col [nzSpan]="7">
                    <nz-form-label nzRequired>VNR - Área ubicación del bien </nz-form-label>
                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="VNR - Área ubicación del bien" formControlName="areaUbicacionVNR">
                        <nz-option nzValue="General" nzLabel="General"></nz-option>
                        <nz-option nzValue="Distribución" nzLabel="Distribución"></nz-option>
                        <nz-option nzValue="Comercial" nzLabel="Comercial"></nz-option>
                    </nz-select>
                </div>
                <div nz-col [nzSpan]="1"></div>
                <div nz-col [nzSpan]="7">
                    <nz-form-label nzRequired>VNR - Centro del costo del bien</nz-form-label>
                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="VNR - Centro del costo del bien" formControlName="ccCostoVnr">
                        <nz-option *ngFor="let tp of objCCostoBien" nzValue="{{tp.estructura11_id}}" nzLabel="{{tp.estructura11_nombre}}"></nz-option>
                    </nz-select>
                </div>
                <div nz-col [nzSpan]="2"></div>
                <div nz-col [nzSpan]="7">
                    <nz-form-label nzRequired>Tipo Agd</nz-form-label>
                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Tipo Agd" formControlName="tipoAgd">
                        <nz-option *ngFor="let tp of objClasificacionAgd" nzValue="{{tp.codigo_agd}}" nzLabel="{{tp.descripcion_agd}}"></nz-option>
                    </nz-select>
                </div>
            </div>
        </div>

        <div nz-col nzSpan="24">
            <div nz-row style="margin-top: 20px !important;">
                <div nz-col [nzSpan]="10">
                    <nz-form-label nzRequired>Bodega Asignada</nz-form-label>
                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Bodega Asignada" formControlName="bodegaAsignada">
                        <nz-option *ngFor="let tp of objBodegas" nzValue="{{tp.bodega_id}}"
                        nzLabel="{{tp.codigo}} -- {{tp.descripcion}}"></nz-option>
                    </nz-select>
                </div>
                <div nz-col [nzSpan]="1"></div>
                <div nz-col [nzSpan]="6">
                    <nz-form-label nzRequired>Marca del bien</nz-form-label>
                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Marca del bien" (ngModelChange)="filtrarModelos()"
                    formControlName="codigo_marca">
                        <nz-option nzValue="0" nzLabel="Selecciona una opción"></nz-option>
                        <nz-option *ngFor="let tp of objMarcasActivosTbl" nzValue="{{tp.codigo_marca}}" nzLabel="{{tp.nombre_marca}}"></nz-option>
                    </nz-select>
                </div>
                <div nz-col [nzSpan]="1"></div>
                <div nz-col [nzSpan]="6">
                    <nz-form-label nzRequired>Modelo del bien</nz-form-label>
                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Modelo del bien" formControlName="modeloBien">
                        <nz-option nzValue="0" nzLabel="Selecciona una marca" *ngIf="validarModelo"></nz-option>
                        <nz-option *ngFor="let tp of objModelosActivos" nzValue="{{tp.codigo_modelo}}" nzLabel="{{tp.nombre_modelo}}"></nz-option>
                    </nz-select>
                </div>



            </div>
        </div>



        <div nz-col nzSpan="24">
            <div nz-row style="margin-top: 20px !important;">
                <div nz-col [nzSpan]="3">
                    <nz-form-label nzRequired>Serie</nz-form-label>
                    <input type="text" nz-input placeHolder="Serie"  autocomplete="off" formControlName="serieBien"/>
                </div>
                <div nz-col [nzSpan]="1"></div>
                <div nz-col [nzSpan]="6">
                    <nz-form-label nzRequired>Otras especificaciones</nz-form-label>
                    <textarea rows="3" placeholder="Otras especificaciones" nz-input formControlName="otrasEspecificaciones" autocomplete="off"></textarea>
                </div>
                <div nz-col [nzSpan]="1"></div>
                <div nz-col [nzSpan]="4">
                    <nz-form-label nzRequired>Fecha de compra</nz-form-label>
                    <input type="date" formControlName="fechaCompra" nz-input>
                </div>
                <div nz-col [nzSpan]="1"></div>
                <div nz-col [nzSpan]="8">
                    <nz-form-label nzRequired>Proveedor</nz-form-label>
                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Proveedor" formControlName="proveedor">
                        <nz-option *ngFor="let tp of objProveedores" nzValue="{{tp.entidad_id}}" nzLabel="{{tp.entidad_nombre}}"></nz-option>
                    </nz-select>
                </div>
            </div>
        </div>

        <div nz-col nzSpan="24">
            <div nz-row style="margin-top: 20px !important;">
                <div nz-col [nzSpan]="5">
                    <nz-form-label nzRequired>Departamento</nz-form-label>
                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Departamento" formControlName="cod_departamento"
                    (ngModelChange)="filtrarMunicipios()">
                        <nz-option nzValue="0" nzLabel="Selecciona una opción"></nz-option>
                        <nz-option *ngFor="let tp of objDepartamentos" nzValue="{{tp.ID}}" nzLabel="{{tp.DepName}}"></nz-option>
                    </nz-select>
                </div>
                <div nz-col [nzSpan]="1"></div>
                <div nz-col [nzSpan]="5">
                    <nz-form-label nzRequired>Municipio</nz-form-label>
                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Municipio" formControlName="municipio">
                        <nz-option nzValue="0" nzLabel="Selecciona un departamento" *ngIf="validarDepartamento"></nz-option>
                        <nz-option *ngFor="let tp of objMunicipios" nzValue="{{tp.ID}}" nzLabel="{{tp.MunName}}"></nz-option>
                    </nz-select>
                </div>
                <div nz-col [nzSpan]="1"></div>
                <div nz-col [nzSpan]="6">
                    <nz-form-label nzRequired>Ubicación Física</nz-form-label>
                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Ubicación Física" formControlName="ubicacionFisica">
                        <nz-option nzValue="0" nzLabel="Selecciona una opción"></nz-option>
                        <nz-option *ngFor="let tp of objUbicacionFisica" nzValue="{{tp.NOMBRE}}" nzLabel="{{tp.NOMBRE}}"></nz-option>
                    </nz-select>
                </div>

                <div nz-col [nzSpan]="1"></div>
                <div nz-col [nzSpan]="5">
                    <nz-form-label nzRequired>Estado del activo</nz-form-label>
                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Estado del activo" formControlName="estadoActivo">
                        <nz-option nzValue="A" nzLabel="Activo"></nz-option>
                        <nz-option nzValue="S" nzLabel="Para Stock"></nz-option>
                    </nz-select>
                </div>
            </div>
        </div>

        <div nz-col nzSpan="24">
            <div nz-row style="margin-top: 20px !important;">
                <div nz-col [nzSpan]="7">
                    <nz-form-label nzRequired>Valor de compra (sin IVA)</nz-form-label>
                    <input type="number" step="0.01" nz-input placeholder="Valor de compra" autocomplete="off" formControlName="valorSiva">
                </div>
                <div nz-col [nzSpan]="1"></div>
                <div nz-col [nzSpan]="7" *ngIf="user.rol == 'Administrador Act. Contable'">
                     <nz-form-label nzRequired >Valor residual</nz-form-label>
                     <input type="number" step="0.01"  nz-input placeholder="Valor residual" autocomplete="off" formControlName="af_valor_residual">
                 </div>
                 <div nz-col [nzSpan]="1"></div>
                 <div nz-col [nzSpan]="7" *ngIf="user.rol == 'Administrador Act. VNR'">
                     <nz-form-label nzRequired>Valor VNR</nz-form-label>
                     <input type="number" step="0.01"  nz-input placeholder="Valor VNR" autocomplete="off" formControlName="af_valor_vnr_siva">
                 </div>
            </div>
        </div>

        <div nz-col nzSpan="24">
            <div nz-row style="margin-top: 40px !important;">
                <nz-divider nzType="horizontal" style="height: 1px !important;background-color: #001529;"></nz-divider>
                <button (click)="guardarAltaActivo()" [disabled] = "altaActivoForm.invalid" nz-button nzType="primary" nzBlock>Guardar datos</button>
            </div>
        </div>

    </div>
    </form>
</nz-card>


<!--Modal para mostrar formulario de edición de activo-->
<nz-modal nzWidth="90%" [(nzVisible)]="modalDetallesActivo" *ngIf="datosCargadosEditar"
[nzStyle]="{ top: '10px' }"
[nzFooter]="modalFooterDetallesActivo" [nzContent]="modalContentDetallesActivo" (nzOnCancel)="cerrarCardEditar()">
    <ng-template #modalContentDetallesActivo>
        <form nz-form  [formGroup]="editarActivoForm">
            <div nz-row *ngIf="datosCargadosEditar">
        
                <div nz-col nzSpan="18">
                    <h2><i nz-icon nzType="file-add" nzTheme="fill"></i> Detalles del Activo</h2>
        
                </div>
        
         
                <nz-divider nzType="horizontal" style="height: 1px !important;background-color: #001529;"></nz-divider>
        
                <nz-tabset>
                    <nz-tab nzTitle="Detalles del activo">
                        <div nz-col nzSpan="24">
                            <div nz-row>
                                <div nz-col [nzSpan]="5">
                                    <nz-form-label nzRequired>Tipo de documento</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Tipo de documento" formControlName="codigo_tipo_documento"
                                    name="codigo_tipo_documento">
                                        <nz-option *ngFor="let tp of objTipoDocumentosTbl" nzValue="{{tp.codigo_tipo_documento}}" nzLabel="{{tp.descripcion_tipo_documento}}"></nz-option>
                                    </nz-select>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="6">
                                    <nz-form-label nzRequired>N° de documento</nz-form-label>
                                    <input type="text" nz-input placeholder="N° de documento" formControlName="numero_documento">
                                    <input type="hidden" nz-input formControlName="af_codigo_interno">
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                 <div nz-col [nzSpan]="6">
                                        <nz-form-label nzRequired>Usuario responsable</nz-form-label>
                                        <nz-select formControlName="codigo_asignado"  
                                        nzShowSearch nzAllowClear nzPlaceHolder="Nombre de usuario">
                                            <nz-option *ngFor="let user of objUsuarios" nzValue="{{user.id}}" nzLabel="{{user.nombre}}"></nz-option>
                                          </nz-select>
                                </div>
                            </div>


                        </div>
        
        
                        <div nz-col nzSpan="24" style="margin-top: 20px !important;">
                            <div nz-row>
                                <div nz-col [nzSpan]="5" *ngIf="user.rol == 'Administrador Act. VNR'">
                                    <nz-form-label nzRequired>Código de VNR</nz-form-label>
                                    <input type="text" placeholder="Código de VNR" nz-input  formControlName="af_codigo_vnr" autocomplete="off">
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="5">
                                    <nz-form-label nzRequired>Código Contabilidad</nz-form-label>
                                    <input type="text" placeholder="Código Contabilidad" nz-input  formControlName="af_codigo_contable" autocomplete="off">
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="5">
                                    <nz-form-label nzRequired>Tipo de Activo</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Tipo de activo" formControlName="codigo_ppye"
                                    (ngModelChange)="getCuentaContablePPYEEdicion()">
                                        <nz-option nzValue="0" nzLabel="Selecciona una opción"></nz-option>
                                        <nz-option *ngFor="let tp of objTipoActivosTbl" nzValue="{{tp.cod_ppye}}" nzLabel="{{tp.descripcion_ppye}}"></nz-option>
                                    </nz-select>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="6">
                                    <nz-form-label nzRequired>Fecha de registro</nz-form-label>
                                        <input type="date" nz-input formControlName="fechaRegistro">
                                </div>
                            </div>
                        </div>
                        <div *ngIf="user.rol != 'Usuario'">
                            <div nz-col nzSpan="24"  *ngFor="let tp of objTipoActivoPPYEdicion">
                                <nz-divider nzType="horizontal" style="height: 1px !important;background-color: #001529;"></nz-divider>
            
                                <h3>Detalles del tipo de activo</h3>
                                <div nz-row>
                                    <div nz-col [nzSpan]="1"></div>
                                    <div nz-col [nzSpan]="5">
                                        <nz-form-label nzRequired>Cuenta contable asociada</nz-form-label>
                                        <input type="text" placeholder="Cuenta contable asociada" nz-input
                                        [(ngModel)]="tp.cuenta_contable" formControlName="cuenta_contable" readonly>
                                    </div>
                                    <div nz-col [nzSpan]="1"></div>
                                    <div nz-col [nzSpan]="5">
                                        <nz-form-label nzRequired>Tasa Fiscal</nz-form-label>
                                        <input type="text" placeholder="Tasa Fiscal" nz-input
                                        [(ngModel)]="tp.tasaFiscal" formControlName="af_tasa_depreciacion_fiscal" readonly>
                                    </div>
                                    <div nz-col [nzSpan]="1"></div>
                                    <div nz-col [nzSpan]="5">
                                        <nz-form-label nzRequired>Tasa Financiera</nz-form-label>
                                        <input type="text" placeholder="Tasa Financiera" nz-input
                                        [(ngModel)]="tp.tasaFinan" formControlName="af_tasa_depreciacion_financ" readonly>
                                    </div>
            
                                    <div nz-col [nzSpan]="1"></div>
                                    <div nz-col [nzSpan]="4">
                                        <nz-form-label nzRequired>Vida útil (Años)</nz-form-label>
                                        <input type="text" placeholder="Vida útil (Años)" nz-input
                                        [(ngModel)]="tp.vidaUtil" formControlName="af_vida_util" readonly>
                                    </div>
                                </div>
                                <div nz-row>
                                    <div nz-col [nzSpan]="1"></div>
                                    <div nz-col [nzSpan]="5">
                                        <nz-form-label nzRequired>Tipo de bien</nz-form-label>
                                        <input type="text" placeholder="Vida útil (Años)" nz-input
                                        [(ngModel)]="tp.tipo_bien" formControlName="tipo_bien" readonly>
                                    </div>
                                    <div nz-col [nzSpan]="1"></div>
                                    <div nz-col [nzSpan]="5">
                                        <nz-form-label nzRequired>Siglas</nz-form-label>
                                        <input type="text" nz-input [(ngModel)]="tp.siglas" formControlName="siglas" readonly>
                                    </div>
                                    <div nz-col [nzSpan]="1"></div>
                                    <div nz-col [nzSpan]="7">

                                        <nz-form-label nzRequired>Seleccione el municipio de la cuenta contable</nz-form-label>
                                        <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Municipio de la cuenta contable" formControlName="cuenta_hija">
                                            <nz-option *ngFor="let tp of objCuentasHijas" nzValue="{{tp.cuenta}}" nzLabel="{{tp.cuenta}} -- {{tp.nombre}}"></nz-option>
                                        </nz-select>
                                    </div>
                                </div>
                                <nz-divider nzType="horizontal" style="height: 1px !important;background-color: #001529;"></nz-divider>
            
                            </div>
                        </div>

                       
        
                        <div nz-col nzSpan="24">
                            <div nz-row style="margin-top: 20px !important;">
                                <div nz-col [nzSpan]="7">
                                    <nz-form-label nzRequired>Tipo de partida</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Tipo de partida" formControlName="tipo_partida_id">
                                        <nz-option *ngFor="let tp of objTipoPartida" nzValue="{{tp.tipo_partida_id}}" nzLabel="{{tp.tipo_partida_descripcion}}"></nz-option>
                                    </nz-select>
                                </div>
                                <div nz-col [nzSpan]="2"></div>
                                <div nz-col [nzSpan]="7">
                                    <nz-form-label nzRequired>VNR - Tipo de activo fijo</nz-form-label>
                                    <nz-select (ngModelChange)="getActivoNameEdicion()"  nzShowSearch nzAllowClear nzPlaceHolder="VNR - Tipo de activo fijo" formControlName="codigo_tipo_bien_vnr">
                                        <nz-option *ngFor="let tp of objTipoBienVNR" nzValue="{{tp.codigo_tipo_bien_vnr}}" nzLabel="{{tp.nombre_tipo_bien}}"></nz-option>
                                    </nz-select>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="7">
                                    <nz-form-label nzRequired>Descripción del bien</nz-form-label>
                                    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Descripción del bien" formControlName="descripcion_bien">
                                        <nz-option nzValue="0" nzLabel="Selecciona una opción"></nz-option>
                                        <nz-option *ngFor="let tp of descActivos" nzValue="{{tp.nombre}}" nzLabel="{{tp.nombre}}"></nz-option>
                                    </nz-select>
                                </div>
                            </div>
                        </div>
        
                        <div nz-col nzSpan="24">
                            <div nz-row style="margin-top: 20px !important;">
                                <div nz-col [nzSpan]="7">
                                    <nz-form-label nzRequired>VNR - Área ubicación del bien </nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="VNR - Área ubicación del bien" formControlName="area_del_bien_vnr">
                                        <nz-option nzValue="General" nzLabel="General"></nz-option>
                                        <nz-option nzValue="Distribución" nzLabel="Distribución"></nz-option>
                                        <nz-option nzValue="Comercial" nzLabel="Comercial"></nz-option>
                                    </nz-select>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="7">
                                    <nz-form-label nzRequired>VNR - Centro del costo del bien</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="VNR - Centro del costo del bien" formControlName="ccosto_del_bien_vnr">
                                        <nz-option *ngFor="let tp of objCCostoBien" nzValue="{{tp.estructura11_id}}" nzLabel="{{tp.estructura11_nombre}}"></nz-option>
                                    </nz-select>
                                </div>
                                <div nz-col [nzSpan]="2"></div>
                                <div nz-col [nzSpan]="7">
                                    <nz-form-label nzRequired>Tipo Agd</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Tipo Agd" formControlName="codigo_agd">
                                        <nz-option *ngFor="let tp of objClasificacionAgd" nzValue="{{tp.codigo_agd}}" nzLabel="{{tp.descripcion_agd}}"></nz-option>
                                    </nz-select>
                                </div>
                            </div>
                        </div>
        
                        <div nz-col nzSpan="24">
                            <div nz-row style="margin-top: 20px !important;">
                                <div nz-col [nzSpan]="10">
                                    <nz-form-label nzRequired>Bodega Asignada</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Bodega Asignada" formControlName="bodega_id">
                                        <nz-option *ngFor="let tp of objBodegas" nzValue="{{tp.bodega_id}}"
                                        nzLabel="{{tp.codigo}} -- {{tp.descripcion}}"></nz-option>
                                    </nz-select>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="6">
                                    <nz-form-label nzRequired>Marca del bien</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Marca del bien" (ngModelChange)="filtrarModelosEdicion()"
                                    formControlName="codigo_marca">
                                        <nz-option nzValue="0" nzLabel="Selecciona una opción"></nz-option>
                                        <nz-option *ngFor="let tp of objMarcasActivosTbl" nzValue="{{tp.codigo_marca}}" nzLabel="{{tp.nombre_marca}}"></nz-option>
                                    </nz-select>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="6">
                                    <nz-form-label nzRequired>Modelo del bien</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Modelo del bien" formControlName="codigo_modelo">
                                        <nz-option nzValue="0" nzLabel="Selecciona una marca" *ngIf="validarModelo"></nz-option>
                                        <nz-option *ngFor="let tp of objModelosActivos" nzValue="{{tp.codigo_modelo}}" nzLabel="{{tp.nombre_modelo}}"></nz-option>
                                    </nz-select>
                                </div>
        
        
        
                            </div>
                        </div>
        
        
        
                        <div nz-col nzSpan="24">
                            <div nz-row style="margin-top: 20px !important;">
                                <div nz-col [nzSpan]="3">
                                    <nz-form-label nzRequired>Serie</nz-form-label>
                                    <input type="text" nz-input placeHolder="Serie"  autocomplete="off" formControlName="af_serie"/>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="6">
                                    <nz-form-label nzRequired>Otras especificaciones</nz-form-label>
                                    <textarea rows="3" placeholder="Otras especificaciones" nz-input formControlName="otras_especificaciones" autocomplete="off"></textarea>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="4">
                                    <nz-form-label nzRequired>Fecha de compra</nz-form-label>
                                    <input type="date" formControlName="fechaCompra" nz-input>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="8">
                                    <nz-form-label nzRequired>Proveedor</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Proveedor" formControlName="codigo_proveedor">
                                        <nz-option *ngFor="let tp of objProveedores" nzValue="{{tp.entidad_id}}" nzLabel="{{tp.entidad_nombre}}"></nz-option>
                                    </nz-select>
                                </div>
                            </div>
                        </div>
        
                        <div nz-col nzSpan="24">
                            <div nz-row style="margin-top: 20px !important;">
                                <div nz-col [nzSpan]="5">
                                    <nz-form-label nzRequired>Departamento</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Departamento" formControlName="cod_departamento"
                                    (ngModelChange)="filtrarMunicipiosEdicion()">
                                        <nz-option nzValue="0" nzLabel="Selecciona una opción"></nz-option>
                                        <nz-option *ngFor="let tp of objDepartamentos" nzValue="{{tp.ID}}" nzLabel="{{tp.DepName}}"></nz-option>
                                    </nz-select>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="5">
                                    <nz-form-label nzRequired>Municipio</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Municipio" formControlName="cod_municipio">
                                        <nz-option nzValue="0" nzLabel="Selecciona un departamento" *ngIf="validarDepartamento"></nz-option>
                                        <nz-option *ngFor="let tp of objMunicipios" nzValue="{{tp.ID}}" nzLabel="{{tp.MunName}}"></nz-option>
                                    </nz-select>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="6">
                                    <nz-form-label nzRequired>Ubicación Física</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Ubicación Física" formControlName="codigo_sucursal">
                                        <nz-option nzValue="0" nzLabel="Selecciona una opción"></nz-option>
                                        <nz-option *ngFor="let tp of objUbicacionFisica" nzValue="{{tp.NOMBRE}}" nzLabel="{{tp.NOMBRE}}"></nz-option>
                                    </nz-select>
                                </div>
        
                                <div nz-col [nzSpan]="1"></div>
                                
                            </div>
                        </div>
        
                         <div nz-col nzSpan="24">
                            <div nz-row style="margin-top: 20px !important;">
                                <div nz-col [nzSpan]="5" *ngIf="user.rol != 'Usuario'">
                                    <nz-form-label nzRequired>Valor de compra (sin IVA)</nz-form-label>
                                    <input type="number" step="0.01"  nz-input placeholder="Valor de compra" autocomplete="off" formControlName="af_valor_compra_siva">
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                               <div nz-col [nzSpan]="7" *ngIf="user.rol == 'Administrador Act. Contable'">
                                    <nz-form-label nzRequired >Valor residual</nz-form-label>
                                    <input type="number" step="0.01"  nz-input placeholder="Valor residual" autocomplete="off" formControlName="af_valor_residual">
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="7" *ngIf="user.rol == 'Administrador Act. VNR'">
                                    <nz-form-label nzRequired>Valor VNR</nz-form-label>
                                    <input type="number" step="0.01"  nz-input placeholder="Valor VNR" autocomplete="off" formControlName="af_valor_vnr_siva">
                                </div>

                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="2" *ngIf="user.rol == 'Administrador Act. VNR'">
                                    <nz-form-label>Solo VNR:</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Solo VNR" formControlName="solo_vnr">
                                        <nz-option nzValue="S" nzLabel="Si"></nz-option>
                                        <nz-option nzValue="N" nzLabel="No"></nz-option>
                                    </nz-select>
                                </div>
                                
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="3" *ngIf="user.rol == 'Administrador Act. VNR'">
                                    <nz-form-label>Solo contabilidad:</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Solo contabilidad" formControlName="aplica_contabilidad">
                                        <nz-option nzValue="S" nzLabel="Si"></nz-option>
                                        <nz-option nzValue="N" nzLabel="No"></nz-option>
                                    </nz-select>
                                </div>
                            </div>
                        </div>
        
                        <div nz-col nzSpan="24">
                            <div nz-row style="margin-top: 40px !important;">
                                <nz-divider nzType="horizontal" style="height: 1px !important;background-color: #001529;"></nz-divider>
                                <button *ngIf="user.rol != 'Usuario' && vista == 1" (click)="guardarEdicionActivo()"  nz-button nzType="primary" nzBlock>Guardar datos</button>
                            </div>
                        </div>
        
                    </nz-tab>
                    <nz-tab nzTitle="Historial del activo">
                     
                        <nz-table nzShowPagination #rowSelectionTableHistorial
                            nzShowSizeChanger #basicTable (nzCurrentPageDataChange)="onCurrentPageDataChangeHistorial($event)"
                            [nzData]="listOfCurrentPageDataHistorial">
                            <thead>
                            <tr>

                                <th><i nz-icon nzType="tool" nzTheme="outline"></i> Movimiento</th>
                                <th><i nz-icon nzType="calendar" nzTheme="outline"></i> Fecha </th>
                                <th><i nz-icon nzType="user" nzTheme="outline"></i> Usuario </th>
                                <th><i nz-icon nzType="user" nzTheme="outline"></i> Aprobado por </th>
                                <th><i nz-icon nzType="user" nzTheme="outline"></i> Usuario asignado </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr *ngFor="let hist of rowSelectionTableHistorial.data">
                                <td>{{ hist.movimiento }}</td>
                                <td>{{ hist.fechaMovimiento }} {{hist.horaMovimiento}}</td>
                                <td>{{ hist.usuario_movimiento }}</td>
                                <td>{{ hist.usuario_aprobacion }}</td>
                                <td>{{ hist.usuario_asignado }}</td>
                            </tr>
                            </tbody>
                        </nz-table>
                    </nz-tab>
                </nz-tabset>
        
        
        
            </div>
        </form>

    </ng-template>

    <ng-template #modalFooterDetallesActivo>
        <button nz-button nzType="danger" (click)="cerrarCardEditar()">Cancelar</button>
    </ng-template>
</nz-modal>

<!--modal para el listado de activos a dar de baja-->
<nz-modal [(nzVisible)]="modalListadoActivosBaja"  nzWidth="60%"  
 [nzFooter]="modalListaBajafooter" [nzContent]="modalListaBajaContent" (nzOnCancel)="cerrarModalListaActivoBajas()">
    <ng-template #modalListaBajaContent>
        <br>
        <h2 style="text-align: center !important;">Listado de activos de los que se iniciará el proceso de baja</h2>

       
                <form [formGroup]="frm_activoBaja" style="margin-left: 30px;margin-right: 30px;">       

                    <nz-table [nzData]="['']" #basicTable [nzShowPagination]="false">
                        <thead>
                            <tr>
                                <th style="text-align: center !important; background-color: #7B0505 !important;
                                color: white !important;">
                                    Código
                                </th>
                                <th style="text-align: center !important; background-color: #7B0505 !important;
                                color: white !important;">
                                    Activo
                                </th>
                                <th style="text-align: center !important; background-color: #7B0505 !important;
                                color: white !important;">
                                    Motivo de baja
                                </th>
                            </tr>
                        </thead>
                        <tbody  formArrayName="actSeleccionadosBajas">
                            <tr *ngFor="let item of actSeleccionadosBajas.controls; let pointIndex=index" [formGroupName]="pointIndex">
                                <td>
                                  <input nz-input type="text" formControlName="idActivo" readonly="true"
                                  style="text-align: center !important;">
                                </td>
                               
                                <td>
                                    <input nz-input type="text" formControlName="descripcion" readonly="true"
                                    style="text-align: center !important;">
                                  </td>
                                  <td>
                                    <textarea nz-input type="text" formControlName="motivoBaja"
                                    placeholder="Digita el motivo de la baja"></textarea>
                                  </td>
                            </tr>
                        </tbody>
                    </nz-table>
                  </form>
        
    </ng-template>
    <ng-template #modalListaBajafooter>
        <button nz-button nzType="danger" (click)="cerrarModalListaActivoBajas()">Cancelar</button>
        <button nz-button nzType="primary" (click)="finalizarProcesoBajaListado()">Finalizar proceso de baja</button>
    </ng-template>
</nz-modal>


<!--modal para el listado de activos a trasladar-->
<nz-modal [(nzVisible)]="modalListadoActivosTraslados"  nzWidth="60%"  
 [nzFooter]="modalListaTrasladofooter" [nzContent]="modalListaTrasladoContent" (nzOnCancel)="cerrarModalListaActivoTraslados()">
    <ng-template #modalListaTrasladoContent>
        <br>
        <h2 style="text-align: center !important;">Listado de activos de los que se iniciará el proceso de traslado</h2>
        <nz-divider nzType="horizontal" style="height: 1px !important;background-color: #001529;
        margin-left: 30px;margin-right: 30px"></nz-divider>
       
        <form nz-form  [formGroup]="trasladoActivoForm" style="margin-left: 30px;margin-right: 30px;">
            <div nz-row>
                <div nz-col nzSpan="12">
                    <nz-form-label nzRequired>Usuario a que se trasladará el activo</nz-form-label>
                    <nz-select formControlName="usuarioTrasladoNuevo"  id="usuarioTrasladoNuevo" 
                    nzShowSearch nzAllowClear nzPlaceHolder="Nombre de usuario">
                        <nz-option *ngFor="let user of objUsuarios" nzValue="{{user.id}}" nzLabel="{{user.nombre}}"></nz-option>
                      </nz-select>
                </div>
            </div>
        </form>
            <br><br>
                <form [formGroup]="frm_activoTraslado" style="margin-left: 30px;margin-right: 30px;">       

                    <nz-table [nzData]="['']" #basicTable [nzShowPagination]="false">
                        <thead>
                            <tr>
                                <th style="text-align: center !important; background-color: #7B0505 !important;
                                color: white !important;">
                                    Código
                                </th>
                                <th style="text-align: center !important; background-color: #7B0505 !important;
                                color: white !important;">
                                    Activo
                                </th>
                            </tr>
                        </thead>
                        <tbody  formArrayName="actSeleccionadosTraslados">
                            <tr *ngFor="let item of actSeleccionadosTraslados.controls; let pointIndex=index" [formGroupName]="pointIndex">
                                <td>
                                  <input nz-input type="text" formControlName="idActivo" readonly="true"
                                  style="text-align: center !important;">
                                </td>
                               
                                <td>
                                    <input nz-input type="text" formControlName="descripcion" readonly="true"
                                    style="text-align: center !important;">
                                  </td>
                            </tr>
                        </tbody>
                    </nz-table>
                  </form>
        
    </ng-template>
    <ng-template #modalListaTrasladofooter>
        <button nz-button nzType="danger" (click)="cerrarModalListaActivoTraslados()">Cancelar</button>
        <button nz-button nzType="primary" (click)="iniciarProcesoTrasaladoListado()">Iniciar proceso de traslado</button>

    </ng-template>
</nz-modal>


<!--Moal de aceptación de alta-->
<nz-modal [(nzVisible)]="modalActivacionVisible"   [nzFooter]="modalFooter" [nzContent]="modalContent"
(nzOnCancel)="cerrarModalActivacion()">

    <ng-template #modalContent>
        <h3 style="text-align: center !important;">¿Desea activar el artículo N° {{actFijoOb.af_codigo_interno}} asignado a {{actFijoOb.asignado}}?</h3>
    </ng-template>

    <ng-template #modalFooter>
        <button nz-button nzType="danger" (click)="cerrarModalActivacion()">Cancelar</button>
        <button nz-button nzType="primary" (click)="guardarActivacion()">Activar</button>
    </ng-template>
</nz-modal>



<!--Modal para elegir si se asginará otro activo sobre el documento-->
<nz-modal [(nzVisible)]="modalElegirMismoDocumento"   [nzFooter]="modalElegirMismoDocumentoFooter" [nzContent]="modalElegirMismoDocumentoContent">

    <ng-template #modalElegirMismoDocumentoContent>
        <h3 style="text-align: center !important;margin-top: 40px;">¿Desea generar otro activo sobre el mismo 
            documento?</h3>
    </ng-template>

    <ng-template #modalElegirMismoDocumentoFooter>
        <button nz-button nzType="danger" (click)="finalizarSoloUno()">No, ya he finalizado...</button>
        <button nz-button nzType="primary" (click)="ingresarOtroActivoMismoDoc()">Si, añadir otro...</button>
    </ng-template>
</nz-modal>



<!-- MODAL PARA LA ACEPTACION DE BAJA POR PARTE DEL ADMINISTRADOR -->

<nz-modal [(nzVisible)]="modalFinalizarProcesoBaja"  
 [nzFooter]="modalprocesofinbajafooter" [nzContent]="modalprocesofinbajacontent"
 (nzOnCancel)="cerrarModalFinalizarProcesoBaja()">
    <ng-template #modalprocesofinbajacontent>

        
        <form nz-form  [formGroup]="bajaActivoFormAdmin">
            <div nz-row>

                <div nz-col nzSpan="24">
                    <h3 style="text-align: center !important;margin-top: 40px;">¿Desea finalizar el proceso de baja del activo N°
                        {{actFijoOb.af_codigo_interno}} asignado al usuario   {{actFijoOb.asignado}}?</h3>
                </div>

                <div nz-col nzSpan="24">
                    <nz-form-label nzRequired>Motivo de la baja </nz-form-label>
                    <textarea rows="3" placeholder="Motivo de baja" nz-input formControlName="motivoBajaInput"
                    [(ngModel)]="actFijoOb.motivoBaja" autocomplete="off"></textarea>
                </div>
            </div>
        </form>

        
    </ng-template>
    <ng-template #modalprocesofinbajafooter>
        <button nz-button nzType="danger" (click)="cerrarModalFinalizarProcesoBaja()">Cancelar</button>
        <button nz-button nzType="primary" (click)="finalizarProcesoBaja()">Finalizar proceso de baja</button>
    </ng-template>
</nz-modal>