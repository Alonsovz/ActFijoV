<div class="titulo"> 
    Supervisor de activos
    <button nz-button nzType="primary" style="float: right;" (click)="showCardBodegas()">
        <i nz-icon nzType="home"></i>Bodegas
    </button>
    <button nz-button nzType="danger" style="float: right;" (click)="showCardActivos()">
        <i nz-icon nzType="tool"></i>Activos
    </button>

    <nz-divider nzType="horizontal" style="height: 1px !important;background-color: #001529;"></nz-divider>

  
</div>



  <!--card para lista de activos supervisor de bodegas-->
<nz-card style="width:98%" class="cardShadow"  *ngIf="mostrarCardBodegas">

    <div nz-row>
        <div nz-col nzSpan="19">
            <h2> <i nz-icon nzType="home"></i> Listado de bodegas que superviso</h2>
        </div>
        <div nz-col nzSpan="5">
            <nz-form-label>Buscar </nz-form-label>
            <input nz-input [(ngModel)]="_texto" id="texto" name="texto" placeholder="Buscar"
            autocomplete="off"  (ngModelChange)="ConvertToLower($event)">
        </div>
    </div>

<nz-tabset>
    
    
    <nz-tab [nzTitle]="altas" (nzClick)="getAltasSupervisor()">

        <ng-template #altas>
             Altas <nz-badge  [nzCount]="conteoAltas"  nzShowZero
            [nzStyle]="{ backgroundColor: '#007E61', color: 'white' }"></nz-badge>
        </ng-template>

        <h2 style="color: #007E61 !important;"> <i nz-icon nzType="bars" nzTheme="outline"></i> Altas</h2>
        
        <nz-skeleton [nzActive]="true"  *ngIf="mostrarSkeletonTabla"></nz-skeleton>

        <nz-table nzShowPagination #altasSupervisor
        nzShowSizeChanger #basicTable (nzCurrentPageDataChange)="paginacionTablaAltasSupervisor($event)" 
        [nzData]="listaAltasSupervisor" *ngIf="mostrarTablaCarga">
            <thead>
              <tr>

                <th style="background-color: #007E61 !important;"><i nz-icon nzType="barcode" nzTheme="outline"></i> Código</th>
                <th style="background-color: #007E61 !important;"><i nz-icon nzType="edit" nzTheme="outline"></i> Descripción</th>
                <th style="background-color: #007E61 !important;"><i nz-icon nzType="calendar" nzTheme="outline"></i> Fecha de alta</th>
                <th style="background-color: #007E61 !important;"><i nz-icon nzType="user" nzTheme="outline"></i> Asignado</th>
                <th style="background-color: #007E61 !important;"><i nz-icon nzType="home" nzTheme="outline"></i> Bodega</th>
                <th style="background-color: #007E61 !important;text-align: center;"><i nz-icon nzType="bars" nzTheme="outline"></i> Acciones</th>
              
            </tr>
            </thead>
            <tbody>
              <tr  *ngFor="let ob of altasSupervisor.data | searchactgestion: texto">
                <td>{{ ob.af_codigo_interno }}</td>
                <td>{{ ob.descripcion_bien }}</td>
                <td>{{ ob.fechaAlta }} {{ ob.horaAlta }}</td>
                <td>{{ ob.asignado }}</td>
                <td>{{ ob.nomBodega }}</td>
                <td  style="text-align: center; align-items: center;">
                    <button style="margin: 5px !important;" nz-button nzType="default" nzDanger (click)="editarActFijo(ob,2)"
                    nzTooltipTitle="Detalles del activo" nzTooltipPlacement="topCenter" nz-tooltip><i nz-icon nzType="edit" nzTheme="outline"></i></button>
                </td>
              </tr>
            </tbody>
        </nz-table>
    </nz-tab>
    
    <nz-tab [nzTitle]="traslados" (nzClick)="getTrasladosSupervisor()">

        <ng-template #traslados>
             Traslados <nz-badge  [nzCount]="conteoTraslados"  nzShowZero
            [nzStyle]="{ backgroundColor: '#1A3A78', color: 'white' }"></nz-badge>
        </ng-template>

        <h2 style="color: #1A3A78 !important;"> <i nz-icon nzType="bars" nzTheme="outline"></i> Traslados</h2>


        <nz-skeleton [nzActive]="true"  *ngIf="mostrarSkeletonTabla"></nz-skeleton>
        
        <nz-table nzShowPagination #trasladosSupervisor
        nzShowSizeChanger #basicTable (nzCurrentPageDataChange)="paginacionTablaTrasladosSupervisor($event)" 
        [nzData]="listaTrasladosSupervisor" *ngIf="mostrarTablaCarga">
        <thead>
            <tr>

            <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="barcode" nzTheme="outline"></i> Código</th>
            <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="edit" nzTheme="outline"></i> Descripción</th>
            <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="calendar" nzTheme="outline"></i> Fecha de traslado</th>
            <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="user" nzTheme="outline"></i> Usuario anterior </th>
            <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="user" nzTheme="outline"></i> Asignado a </th>
            <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="home" nzTheme="outline"></i>Bodega</th>
            <th style="background-color: #1A3A78 !important;text-align: center;"><i nz-icon nzType="bars" nzTheme="outline"></i> Acciones</th>
            </tr>
        </thead>
        <tbody>
                <tr *ngFor="let ob of trasladosSupervisor.data | searchactgestion: texto">
                    <td>{{ ob.af_codigo_interno }}</td>
                    <td style="width: 20% !important;">{{ ob.descripcion_bien }}</td>
                    <td>{{ ob.fechaTraslado }} {{ ob.horaTraslado }}</td>
                    <td>{{ ob.usuarioAnterior }}</td>
                    <td>{{ ob.asignado }}</td>
                    <td>{{ ob.nomBodega }}</td>
                    <td  style="text-align: center; align-items: left;">
                        <button style="margin: 5px !important;" nz-button nzType="default" nzDanger (click)="editarActFijo(ob,1)"
                        nzTooltipTitle="Detalles del activo" nzTooltipPlacement="topCenter" nz-tooltip><i nz-icon nzType="edit" nzTheme="outline"></i></button>
                      </td>
                </tr>
            
            
        </tbody>
        </nz-table>
        
    </nz-tab>

    <nz-tab [nzTitle]="bajas" (nzClick)="getBajasSupervisor()">

        
        <ng-template #bajas>
            Bajas  <nz-badge [nzCount]="conteoBajas" nzShowZero
            [nzStyle]="{ backgroundColor: '#7B0505' }"></nz-badge>
          </ng-template>
        <h2 style="color: #7B0505 !important;"> <i nz-icon nzType="bars" nzTheme="outline"></i> Bajas</h2>

        <nz-skeleton [nzActive]="true"  *ngIf="mostrarSkeletonTabla"></nz-skeleton>

        <nz-table nzShowPagination #bajasSupervisor
        nzShowSizeChanger #basicTable (nzCurrentPageDataChange)="paginacionTablaBajasSupervisor($event)" 
        [nzData]="listaBajasSupervisor" *ngIf="mostrarTablaCarga">
        <thead>
            <tr>

                <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="barcode" nzTheme="outline"></i> Código</th>
                <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="edit" nzTheme="outline"></i> Descripción</th>
                <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="calendar" nzTheme="outline"></i> Fecha de baja</th>
                <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="user" nzTheme="outline"></i> Asignado a </th>
                <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="home" nzTheme="outline"></i> Bodega </th>
                <th style="background-color: #7B0505 !important;;text-align: center;"><i nz-icon nzType="bars" nzTheme="outline"></i> Acciones</th>
            </tr>
            </thead>
            <tbody>
                    <tr *ngFor="let ob of bajasSupervisor.data | searchactgestion: texto">
                    <td>{{ ob.af_codigo_interno }}</td>
                    <td style="width: 20% !important;">{{ ob.descripcion_bien }}</td>
                    <td>{{ ob.fechaBaja }} {{ ob.horaBaja }}</td>
                    <td>{{ ob.asignado }}</td>
                    <td>{{ ob.nomBodega }}</td>
                    <td  style="text-align: center; align-items: left;">
                   
                        <button style="margin: 5px !important;" nz-button nzType="default" nzDanger (click)="editarActFijo(ob,1)"
                        nzTooltipTitle="Detalles del activo" nzTooltipPlacement="topCenter" nz-tooltip><i nz-icon nzType="edit" nzTheme="outline"></i></button>
    
                   
                    </td>
                    </tr>
            
            
            </tbody>
        </nz-table>

    </nz-tab>

</nz-tabset>

</nz-card>


  <!--card para lista de activos supervisor de activo-->
  <nz-card style="width:98%" class="cardShadow"  *ngIf="mostrarCardActivos">

    <div nz-row>
        <div nz-col nzSpan="19">
            <h2> <i nz-icon nzType="tool"></i> Listado de activos que superviso</h2>
        </div>
        <div nz-col nzSpan="5">
            <nz-form-label>Buscar </nz-form-label>
            <input nz-input [(ngModel)]="_texto" id="texto" name="texto" placeholder="Buscar"
            autocomplete="off"  (ngModelChange)="ConvertToLower($event)">
        </div>
    </div>

<nz-tabset>
    
    
    <nz-tab [nzTitle]="altas" (nzClick)="getAltasSupervisor()">

        <ng-template #altas>
             Altas <nz-badge  [nzCount]="conteoAltas"  nzShowZero
            [nzStyle]="{ backgroundColor: '#007E61', color: 'white' }"></nz-badge>
        </ng-template>

        <h2 style="color: #007E61 !important;"> <i nz-icon nzType="bars" nzTheme="outline"></i> Altas</h2>
        
        <nz-skeleton [nzActive]="true"  *ngIf="mostrarSkeletonTabla"></nz-skeleton>

        <nz-table nzShowPagination #altasSupervisor
        nzShowSizeChanger #basicTable (nzCurrentPageDataChange)="paginacionTablaAltasSupervisor($event)" 
        [nzData]="listaAltasSupervisor" *ngIf="mostrarTablaCarga">
            <thead>
              <tr>

                <th style="background-color: #007E61 !important;"><i nz-icon nzType="barcode" nzTheme="outline"></i> Código</th>
                <th style="background-color: #007E61 !important;"><i nz-icon nzType="edit" nzTheme="outline"></i> Descripción</th>
                <th style="background-color: #007E61 !important;"><i nz-icon nzType="calendar" nzTheme="outline"></i> Fecha de alta</th>
                <th style="background-color: #007E61 !important;"><i nz-icon nzType="user" nzTheme="outline"></i> Asignado</th>
                <th style="background-color: #007E61 !important;"><i nz-icon nzType="home" nzTheme="outline"></i> Bodega</th>
                <th style="background-color: #007E61 !important;text-align: center;"><i nz-icon nzType="bars" nzTheme="outline"></i> Acciones</th>
              
            </tr>
            </thead>
            <tbody>
              <tr  *ngFor="let ob of altasSupervisor.data | searchactgestion: texto">
                <td>{{ ob.af_codigo_interno }}</td>
                <td>{{ ob.descripcion_bien }}</td>
                <td>{{ ob.fechaAlta }} {{ ob.horaAlta }}</td>
                <td>{{ ob.asignado }}</td>
                <td>{{ ob.nomBodega }}</td>
                <td  style="text-align: center; align-items: center;">
                    <button style="margin: 5px !important;" nz-button nzType="default" nzDanger (click)="editarActFijo(ob,2)"
                    nzTooltipTitle="Detalles del activo" nzTooltipPlacement="topCenter" nz-tooltip><i nz-icon nzType="edit" nzTheme="outline"></i></button>
                </td>
              </tr>
            </tbody>
        </nz-table>
    </nz-tab>
    
    <nz-tab [nzTitle]="traslados" (nzClick)="getTrasladosSupervisor()">

        <ng-template #traslados>
             Traslados <nz-badge  [nzCount]="conteoTraslados"  nzShowZero
            [nzStyle]="{ backgroundColor: '#1A3A78', color: 'white' }"></nz-badge>
        </ng-template>

        <h2 style="color: #1A3A78 !important;"> <i nz-icon nzType="bars" nzTheme="outline"></i> Traslados</h2>


        <nz-skeleton [nzActive]="true"  *ngIf="mostrarSkeletonTabla"></nz-skeleton>
        
        <nz-table nzShowPagination #trasladosSupervisor
        nzShowSizeChanger #basicTable (nzCurrentPageDataChange)="paginacionTablaTrasladosSupervisor($event)" 
        [nzData]="listaTrasladosSupervisor" *ngIf="mostrarTablaCarga">
        <thead>
            <tr>

            <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="barcode" nzTheme="outline"></i> Código</th>
            <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="edit" nzTheme="outline"></i> Descripción</th>
            <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="calendar" nzTheme="outline"></i> Fecha de traslado</th>
            <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="user" nzTheme="outline"></i> Usuario anterior </th>
            <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="user" nzTheme="outline"></i> Asignado a </th>
            <th style="background-color: #1A3A78 !important;"><i nz-icon nzType="home" nzTheme="outline"></i>Bodega</th>
            <th style="background-color: #1A3A78 !important;text-align: center;"><i nz-icon nzType="bars" nzTheme="outline"></i> Acciones</th>
            </tr>
        </thead>
        <tbody>
                <tr *ngFor="let ob of trasladosSupervisor.data | searchactgestion: texto">
                    <td>{{ ob.af_codigo_interno }}</td>
                    <td style="width: 20% !important;">{{ ob.descripcion_bien }}</td>
                    <td>{{ ob.fechaTraslado }} {{ ob.horaTraslado }}</td>
                    <td>{{ ob.usuarioAnterior }}</td>
                    <td>{{ ob.asignado }}</td>
                    <td>{{ ob.nomBodega }}</td>
                    <td  style="text-align: center; align-items: left;">
                        <button style="margin: 5px !important;" nz-button nzType="default" nzDanger (click)="editarActFijo(ob,1)"
                        nzTooltipTitle="Detalles del activo" nzTooltipPlacement="topCenter" nz-tooltip><i nz-icon nzType="edit" nzTheme="outline"></i></button>
                      </td>
                </tr>
            
            
        </tbody>
        </nz-table>
        
    </nz-tab>

    <nz-tab [nzTitle]="bajas" (nzClick)="getBajasSupervisor()">

        
        <ng-template #bajas>
            Bajas  <nz-badge [nzCount]="conteoBajas" nzShowZero
            [nzStyle]="{ backgroundColor: '#7B0505' }"></nz-badge>
          </ng-template>
        <h2 style="color: #7B0505 !important;"> <i nz-icon nzType="bars" nzTheme="outline"></i> Bajas</h2>

        <nz-skeleton [nzActive]="true"  *ngIf="mostrarSkeletonTabla"></nz-skeleton>

        <nz-table nzShowPagination #bajasSupervisor
        nzShowSizeChanger #basicTable (nzCurrentPageDataChange)="paginacionTablaBajasSupervisor($event)" 
        [nzData]="listaBajasSupervisor" *ngIf="mostrarTablaCarga">
        <thead>
            <tr>

                <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="barcode" nzTheme="outline"></i> Código</th>
                <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="edit" nzTheme="outline"></i> Descripción</th>
                <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="calendar" nzTheme="outline"></i> Fecha de baja</th>
                <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="user" nzTheme="outline"></i> Asignado a </th>
                <th style="background-color: #7B0505 !important;;"><i nz-icon nzType="home" nzTheme="outline"></i> Bodega </th>
                <th style="background-color: #7B0505 !important;;text-align: center;"><i nz-icon nzType="bars" nzTheme="outline"></i> Acciones</th>
            </tr>
            </thead>
            <tbody>
                    <tr *ngFor="let ob of bajasSupervisor.data | searchactgestion: texto">
                    <td>{{ ob.af_codigo_interno }}</td>
                    <td style="width: 20% !important;">{{ ob.descripcion_bien }}</td>
                    <td>{{ ob.fechaBaja }} {{ ob.horaBaja }}</td>
                    <td>{{ ob.asignado }}</td>
                    <td>{{ ob.nomBodega }}</td>
                    <td  style="text-align: center; align-items: left;">
                   
                        <button style="margin: 5px !important;" nz-button nzType="default" nzDanger (click)="editarActFijo(ob,1)"
                        nzTooltipTitle="Detalles del activo" nzTooltipPlacement="topCenter" nz-tooltip><i nz-icon nzType="edit" nzTheme="outline"></i></button>
    
                   
                    </td>
                    </tr>
            
            
            </tbody>
        </nz-table>

    </nz-tab>

</nz-tabset>

</nz-card>

<!--Modal para mostrar formulario de edición de activo-->
<nz-modal nzWidth="90%" [(nzVisible)]="modalDetallesActivo" *ngIf="datosCargadosEditar"
[nzStyle]="{ top: '10px' }"
[nzFooter]="modalFooterDetallesActivo" [nzContent]="modalContentDetallesActivo" (nzOnCancel)="cerrarCardEditar()">
    <ng-template #modalContentDetallesActivo>
        <form nz-form  [formGroup]="editarActivoForm">
            <div nz-row *ngIf="datosCargadosEditar">
        
                <div nz-col nzSpan="18">
                    <h2><i nz-icon nzType="file-add" nzTheme="fill"></i> Detalles del Activo</h2>
        
                </div>
        
        
                <nz-divider nzType="horizontal" style="height: 1px !important;background-color: #001529;"></nz-divider>
        
                <nz-tabset>
                    <nz-tab nzTitle="Detalles del activo">
                        <div nz-col nzSpan="24">
                            <div nz-row>
                                <div nz-col [nzSpan]="5">
                                    <nz-form-label nzRequired>Tipo de documento</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Tipo de documento" formControlName="codigo_tipo_documento"
                                    name="codigo_tipo_documento">
                                        <nz-option *ngFor="let tp of objTipoDocumentosTbl" nzValue="{{tp.codigo_tipo_documento}}" nzLabel="{{tp.descripcion_tipo_documento}}"></nz-option>
                                    </nz-select>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="6">
                                    <nz-form-label nzRequired>N° de documento</nz-form-label>
                                    <input type="text" nz-input placeholder="N° de documento" formControlName="numero_documento">
                                    <input type="hidden" nz-input formControlName="af_codigo_interno">
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="6">
                                    <nz-form-label nzRequired>Asignado  a: </nz-form-label>
                                    <input type="text"  formControlName="asignado" readonly  nz-input>
                                </div>
                            </div>


                        </div>
        
        
                       <!-- <div nz-col nzSpan="24" style="margin-top: 20px !important;">
                            <div nz-row>
                                <div nz-col [nzSpan]="5" *ngIf="user.rol == 'Administrador Act. VNR'">
                                    <nz-form-label nzRequired>Código de VNR</nz-form-label>
                                    <input type="text" placeholder="Código de VNR" nz-input  formControlName="af_codigo_vnr" autocomplete="off">
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="5">
                                    <nz-form-label nzRequired>Código Contabilidad</nz-form-label>
                                    <input type="text" placeholder="Código Contabilidad" nz-input  formControlName="af_codigo_contable" autocomplete="off">
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="5">
                                    <nz-form-label nzRequired>Tipo de Activo</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Tipo de activo" formControlName="codigo_ppye"
                                    (ngModelChange)="getCuentaContablePPYEEdicion()">
                                        <nz-option nzValue="0" nzLabel="Selecciona una opción"></nz-option>
                                        <nz-option *ngFor="let tp of objTipoActivosTbl" nzValue="{{tp.cod_ppye}}" nzLabel="{{tp.descripcion_ppye}}"></nz-option>
                                    </nz-select>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="6">
                                    <nz-form-label nzRequired>Fecha de registro</nz-form-label>
                                        <input type="date" nz-input formControlName="fechaRegistro">
                                </div>
                            </div>
                        </div>
                        <div *ngIf="user.rol != 'Usuario'">
                            <div nz-col nzSpan="24"  *ngFor="let tp of objTipoActivoPPYEdicion">
                                <nz-divider nzType="horizontal" style="height: 1px !important;background-color: #001529;"></nz-divider>
            
                                <h3>Detalles del tipo de activo</h3>
                                <div nz-row>
                                    <div nz-col [nzSpan]="1"></div>
                                    <div nz-col [nzSpan]="5">
                                        <nz-form-label nzRequired>Cuenta contable asociada</nz-form-label>
                                        <input type="text" placeholder="Cuenta contable asociada" nz-input
                                        [(ngModel)]="tp.cuenta_contable" formControlName="cuenta_contable" readonly>
                                    </div>
                                    <div nz-col [nzSpan]="1"></div>
                                    <div nz-col [nzSpan]="5">
                                        <nz-form-label nzRequired>Tasa Fiscal</nz-form-label>
                                        <input type="text" placeholder="Tasa Fiscal" nz-input
                                        [(ngModel)]="tp.tasaFiscal" formControlName="af_tasa_depreciacion_fiscal" readonly>
                                    </div>
                                    <div nz-col [nzSpan]="1"></div>
                                    <div nz-col [nzSpan]="5">
                                        <nz-form-label nzRequired>Tasa Financiera</nz-form-label>
                                        <input type="text" placeholder="Tasa Financiera" nz-input
                                        [(ngModel)]="tp.tasaFinan" formControlName="af_tasa_depreciacion_financ" readonly>
                                    </div>
            
                                    <div nz-col [nzSpan]="1"></div>
                                    <div nz-col [nzSpan]="4">
                                        <nz-form-label nzRequired>Vida útil (Años)</nz-form-label>
                                        <input type="text" placeholder="Vida útil (Años)" nz-input
                                        [(ngModel)]="tp.vidaUtil" formControlName="af_vida_util" readonly>
                                    </div>
                                </div>
                                <div nz-row>
                                    <div nz-col [nzSpan]="1"></div>
                                    <div nz-col [nzSpan]="5">
                                        <nz-form-label nzRequired>Tipo de bien</nz-form-label>
                                        <input type="text" placeholder="Vida útil (Años)" nz-input
                                        [(ngModel)]="tp.tipo_bien" formControlName="tipo_bien">
                                    </div>
                                    <div nz-col [nzSpan]="1"></div>
                                    <div nz-col [nzSpan]="5">
                                        <nz-form-label nzRequired>Siglas</nz-form-label>
                                        <input type="text" nz-input [(ngModel)]="tp.siglas" formControlName="siglas">
                                    </div>
                                </div>
                                <nz-divider nzType="horizontal" style="height: 1px !important;background-color: #001529;"></nz-divider>
            
                            </div>
                        </div>-->

                       
        
                        <div nz-col nzSpan="24">
                            <div nz-row style="margin-top: 20px !important;">
                                <div nz-col [nzSpan]="7">
                                    <nz-form-label nzRequired>Tipo de partida</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Tipo de partida" formControlName="tipo_partida_id">
                                        <nz-option *ngFor="let tp of objTipoPartida" nzValue="{{tp.tipo_partida_id}}" nzLabel="{{tp.tipo_partida_descripcion}}"></nz-option>
                                    </nz-select>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="7">
                                    <nz-form-label nzRequired>Descripción del bien</nz-form-label>
                                    <textarea rows="3" placeholder="Descripción del bien" nz-input formControlName="descripcion_bien" autocomplete="off"></textarea>
                                </div>
                                <div nz-col [nzSpan]="2"></div>
                                <div nz-col [nzSpan]="7">
                                    <nz-form-label nzRequired>VNR - Tipo de activo fijo</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="VNR - Tipo de activo fijo" formControlName="codigo_tipo_bien_vnr">
                                        <nz-option *ngFor="let tp of objTipoBienVNR" nzValue="{{tp.codigo_tipo_bien_vnr}}" nzLabel="{{tp.nombre_tipo_bien}}"></nz-option>
                                    </nz-select>
                                </div>
                            </div>
                        </div>
        
                        <div nz-col nzSpan="24">
                            <div nz-row style="margin-top: 20px !important;">
                                <div nz-col [nzSpan]="7">
                                    <nz-form-label nzRequired>VNR - Área ubicación del bien </nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="VNR - Área ubicación del bien" formControlName="area_del_bien_vnr">
                                        <nz-option nzValue="General" nzLabel="General"></nz-option>
                                        <nz-option nzValue="Distribución" nzLabel="Distribución"></nz-option>
                                        <nz-option nzValue="Comercial" nzLabel="Comercial"></nz-option>
                                    </nz-select>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="7">
                                    <nz-form-label nzRequired>VNR - Centro del costo del bien</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="VNR - Centro del costo del bien" formControlName="ccosto_del_bien_vnr">
                                        <nz-option *ngFor="let tp of objCCostoBien" nzValue="{{tp.estructura11_id}}" nzLabel="{{tp.estructura11_nombre}}"></nz-option>
                                    </nz-select>
                                </div>
                                <div nz-col [nzSpan]="2"></div>
                                <div nz-col [nzSpan]="7">
                                    <nz-form-label nzRequired>Tipo Agd</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Tipo Agd" formControlName="codigo_agd">
                                        <nz-option *ngFor="let tp of objClasificacionAgd" nzValue="{{tp.codigo_agd}}" nzLabel="{{tp.descripcion_agd}}"></nz-option>
                                    </nz-select>
                                </div>
                            </div>
                        </div>
        
                        <div nz-col nzSpan="24">
                            <div nz-row style="margin-top: 20px !important;">
                                <div nz-col [nzSpan]="10">
                                    <nz-form-label nzRequired>Bodega Asignada</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Bodega Asignada" formControlName="bodega_id">
                                        <nz-option *ngFor="let tp of objBodegas" nzValue="{{tp.bodega_id}}"
                                        nzLabel="{{tp.codigo}} -- {{tp.descripcion}}"></nz-option>
                                    </nz-select>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="6">
                                    <nz-form-label nzRequired>Marca del bien</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Marca del bien" (ngModelChange)="filtrarModelosEdicion()"
                                    formControlName="codigo_marca">
                                        <nz-option nzValue="0" nzLabel="Selecciona una opción"></nz-option>
                                        <nz-option *ngFor="let tp of objMarcasActivosTbl" nzValue="{{tp.codigo_marca}}" nzLabel="{{tp.nombre_marca}}"></nz-option>
                                    </nz-select>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="6">
                                    <nz-form-label nzRequired>Modelo del bien</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Modelo del bien" formControlName="codigo_modelo">
                                        <nz-option nzValue="0" nzLabel="Selecciona una marca" *ngIf="validarModelo"></nz-option>
                                        <nz-option *ngFor="let tp of objModelosActivos" nzValue="{{tp.codigo_modelo}}" nzLabel="{{tp.nombre_modelo}}"></nz-option>
                                    </nz-select>
                                </div>
        
        
        
                            </div>
                        </div>
        
        
        
                        <div nz-col nzSpan="24">
                            <div nz-row style="margin-top: 20px !important;">
                                <div nz-col [nzSpan]="3">
                                    <nz-form-label nzRequired>Serie</nz-form-label>
                                    <input type="text" nz-input placeHolder="Serie"  autocomplete="off" formControlName="af_serie"/>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="6">
                                    <nz-form-label nzRequired>Otras especificaciones</nz-form-label>
                                    <textarea rows="3" placeholder="Otras especificaciones" nz-input formControlName="otras_especificaciones" autocomplete="off"></textarea>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="4">
                                    <nz-form-label nzRequired>Fecha de compra</nz-form-label>
                                    <input type="date" formControlName="fechaCompra" nz-input>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="8">
                                    <nz-form-label nzRequired>Proveedor</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Proveedor" formControlName="codigo_proveedor">
                                        <nz-option *ngFor="let tp of objProveedores" nzValue="{{tp.entidad_id}}" nzLabel="{{tp.entidad_nombre}}"></nz-option>
                                    </nz-select>
                                </div>
                            </div>
                        </div>
        
                        <div nz-col nzSpan="24">
                            <div nz-row style="margin-top: 20px !important;">
                                <div nz-col [nzSpan]="5">
                                    <nz-form-label nzRequired>Departamento</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Departamento" formControlName="cod_departamento"
                                    (ngModelChange)="filtrarMunicipiosEdicion()">
                                        <nz-option nzValue="0" nzLabel="Selecciona una opción"></nz-option>
                                        <nz-option *ngFor="let tp of objDepartamentos" nzValue="{{tp.ID}}" nzLabel="{{tp.DepName}}"></nz-option>
                                    </nz-select>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="5">
                                    <nz-form-label nzRequired>Municipio</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Municipio" formControlName="cod_municipio">
                                        <nz-option nzValue="0" nzLabel="Selecciona un departamento" *ngIf="validarDepartamento"></nz-option>
                                        <nz-option *ngFor="let tp of objMunicipios" nzValue="{{tp.ID}}" nzLabel="{{tp.MunName}}"></nz-option>
                                    </nz-select>
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="6">
                                    <nz-form-label nzRequired>Ubicación Física</nz-form-label>
                                    <nz-select  nzShowSearch nzAllowClear nzPlaceHolder="Ubicación Física" formControlName="codigo_sucursal">
                                        <nz-option nzValue="0" nzLabel="Selecciona una opción"></nz-option>
                                        <nz-option *ngFor="let tp of objUbicacionFisica" nzValue="{{tp.NOMBRE}}" nzLabel="{{tp.NOMBRE}}"></nz-option>
                                    </nz-select>
                                </div>
        
                                <div nz-col [nzSpan]="1"></div>
                                
                            </div>
                        </div>
        
                        <!-- <div nz-col nzSpan="24">
                            <div nz-row style="margin-top: 20px !important;">
                                <div nz-col [nzSpan]="5" *ngIf="user.rol != 'Usuario'">
                                    <nz-form-label nzRequired>Valor de compra (sin IVA)</nz-form-label>
                                    <input type="number" step="0.01"  nz-input placeholder="Valor de compra" autocomplete="off" formControlName="af_valor_compra_siva">
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                               <div nz-col [nzSpan]="7" *ngIf="user.rol == 'Administrador Act. Contable'">
                                    <nz-form-label nzRequired >Valor residual</nz-form-label>
                                    <input type="number" step="0.01"  nz-input placeholder="Valor residual" autocomplete="off" formControlName="af_valor_residual">
                                </div>
                                <div nz-col [nzSpan]="1"></div>
                                <div nz-col [nzSpan]="7" *ngIf="user.rol == 'Administrador Act. VNR'">
                                    <nz-form-label nzRequired>Valor VNR</nz-form-label>
                                    <input type="number" step="0.01"  nz-input placeholder="Valor VNR" autocomplete="off" formControlName="af_valor_vnr_siva">
                                </div>
                                
                            </div>
                        </div>-->
        
        
                    </nz-tab>
                    <nz-tab nzTitle="Historial del activo">
                     
                        <nz-table nzShowPagination #rowSelectionTableHistorial
                            nzShowSizeChanger #basicTable (nzCurrentPageDataChange)="onCurrentPageDataChangeHistorial($event)"
                            [nzData]="listOfCurrentPageDataHistorial">
                            <thead>
                            <tr>

                                <th><i nz-icon nzType="tool" nzTheme="outline"></i> Movimiento</th>
                                <th><i nz-icon nzType="calendar" nzTheme="outline"></i> Fecha </th>
                                <th><i nz-icon nzType="user" nzTheme="outline"></i> Usuario </th>
                                <th><i nz-icon nzType="user" nzTheme="outline"></i> Aprobado por </th>
                                <th><i nz-icon nzType="user" nzTheme="outline"></i> Usuario asignado </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr *ngFor="let hist of rowSelectionTableHistorial.data">
                                <td>{{ hist.movimiento }}</td>
                                <td>{{ hist.fechaMovimiento }} {{hist.horaMovimiento}}</td>
                                <td>{{ hist.usuario_movimiento }}</td>
                                <td>{{ hist.usuario_aprobacion }}</td>
                                <td>{{ hist.usuario_asignado }}</td>
                            </tr>
                            </tbody>
                        </nz-table>
                    </nz-tab>
                </nz-tabset>
        
        
        
            </div>
        </form>

    </ng-template>

    <ng-template #modalFooterDetallesActivo>
        <button nz-button nzType="danger" (click)="cerrarCardEditar()">Cancelar</button>
    </ng-template>
</nz-modal>
